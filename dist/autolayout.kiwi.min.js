!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.autolayout=e():t.autolayout=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),a=n(i),o=r(2),s=n(o),u=r(3),c=n(u),l=r(4),f=n(l),p=r(7),h=n(p),d=r(9),v=n(d),y={Attribute:a["default"],Relation:s["default"],Priority:c["default"],VisualFormat:f["default"],View:h["default"],SubView:v["default"]};e["default"]=y},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"};e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={LEQ:"leq",EQU:"equ",GEQ:"geq"};e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250};e["default"]=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;var r="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:r,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:t.relation.view,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:g["default"].EQU,view2:null,attr2:y["default"].CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var n=0;n<t.prevViews.length;n++){var i=t.prevViews[n];switch(t.orientation){case w.HORIZONTAL:t.prevAttr=i!==e?y["default"].RIGHT:y["default"].LEFT,t.curAttr=y["default"].LEFT;break;case w.VERTICAL:t.prevAttr=i!==e?y["default"].BOTTOM:y["default"].TOP,t.curAttr=y["default"].TOP;break;case w.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=i!==e?"default":0}t.constraints.push({view1:i,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function o(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;var r="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:t.relation.view,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var n=0;n<t.prevViews.length;n++){var i=t.prevViews[n];switch(t.orientation){case w.HORIZONTAL:t.prevAttr=i!==e?y["default"].RIGHT:y["default"].LEFT,t.curAttr=y["default"].LEFT;break;case w.VERTICAL:t.prevAttr=i!==e?y["default"].BOTTOM:y["default"].TOP,t.curAttr=y["default"].TOP;break;case w.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=i!==e?"default":0}t.constraints.push({view1:i,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function s(t,e,r){for(var n=void 0,i=1;4>=i;i*=2)if(r.orientations&i&&r.stack.orientation!==i&&!(r.stack.processedOrientations&i)){r.stack.processedOrientations=r.stack.processedOrientations|i,n=n||{name:e,type:"stack"};for(var a=0,o=r.stack.subViews.length;o>a;a++)i===w.ZINDEX?t.constraints.push({view1:n,attr1:y["default"].ZINDEX,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:y["default"].ZINDEX}):(t.constraints.push({view1:n,attr1:i===w.VERTICAL?y["default"].HEIGHT:y["default"].WIDTH,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:i===w.VERTICAL?y["default"].HEIGHT:y["default"].WIDTH}),t.constraints.push({view1:n,attr1:i===w.VERTICAL?y["default"].TOP:y["default"].LEFT,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:i===w.VERTICAL?y["default"].TOP:y["default"].LEFT}))}}function u(t,e){if(e===!0&&(e=t.match(/\.\.\d+$/),e&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2)))),!e)return[t];var r,n=t.match(/\d+$/),i=[];if(n)for(t=t.substring(0,t.length-n[0].length),r=parseInt(n);e>=r;r++)i.push(t+r);else for(i.push(t),r=2;e>=r;r++)i.push(t+r);return i}function c(t,e,r){var n=r?r.view:null,i=[],l=[],f=void 0;n&&(e.push({view:n}),l.push(n));for(var p=0;p<e.length;p++){var h=e[p];if(!Array.isArray(h)&&h.hasOwnProperty("view")||Array.isArray(h)&&h[0].view&&!h[0].relation)for(var d=Array.isArray(h)?h:[h],v=0;v<d.length;v++){h=d[v];for(var _=","===h?[]:h.view?u(h.view,h.range):[null],g=0;g<_.length;g++){var A=_[g];if(l.push(A),A!==n&&(i.push(A),f=t.subViews[A],f||(f={orientations:0},t.subViews[A]=f),f.orientations=f.orientations|t.orientation,f.stack&&s(t,A,f)),void 0!==t.prevViews&&void 0!==A&&t.relation&&"none"!==t.relation.relation)for(var m=0;m<t.prevViews.length;m++){var b=t.prevViews[m];switch(t.orientation){case w.HORIZONTAL:t.prevAttr=b!==n?y["default"].RIGHT:y["default"].LEFT,t.curAttr=A!==n?y["default"].LEFT:y["default"].RIGHT;break;case w.VERTICAL:t.prevAttr=b!==n?y["default"].BOTTOM:y["default"].TOP,t.curAttr=A!==n?y["default"].TOP:y["default"].BOTTOM;break;case w.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=b?t.relation.constant||"default":0}t.constraints.push({view1:b,attr1:t.prevAttr,relation:t.relation.relation,view2:A,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}var E=h.constraints;if(E)for(var C=0;C<E.length;C++)t.prevAttr=t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,t.curAttr=E[C].view||E[C].multiplier?E[C].attribute||t.prevAttr:E[C].variable?y["default"].VARIABLE:y["default"].CONST,t.constraints.push({view1:A,attr1:t.prevAttr,relation:E[C].relation,view2:E[C].view,attr2:t.curAttr,multiplier:E[C].multiplier,constant:E[C].constant,priority:E[C].priority});h.cascade&&c(t,h.cascade,h)}}else","!==h&&(t.prevViews=l,l=[],t.relation=h[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&a(t,n),t.relation.multiplier&&o(t,n)))}if(n){if(f=t.subViews[n]){if(f.stack){var V=new Error('A stack named "'+n+'" has already been created');throw V.column=r.$parserOffset+1,V}}else f={orientations:t.orientation},t.subViews[n]=f;f.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:i},s(t,n,f)}}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=r(5),p=n(f),h=r(6),d=n(h),v=r(1),y=n(v),_=r(2),g=n(_),w={HORIZONTAL:1,VERTICAL:2,ZINDEX:4},A=["viewport","spacing","colors","shapes","widths","heights"],m=function(){function t(){i(this,t)}return l(t,null,[{key:"parseLine",value:function(t,e){if(0===t.length||e&&e.extended&&0===t.indexOf("//"))return[];var r=e&&e.extended?d["default"].parse(t):p["default"].parse(t);if(e&&"raw"===e.outFormat)return[r];var n={constraints:[],lineIndex:(e?e.lineIndex:void 0)||1,subViews:(e?e.subViews:void 0)||{}};if("attribute"===r.type)for(var i=0;i<r.predicates.length;i++)n.constraints.push({view1:r.view,attr1:r.attr,relation:r.predicates[i].relation,view2:r.predicates[i].view,attr2:r.predicates[i].attribute,multiplier:r.predicates[i].multiplier,constant:r.predicates[i].constant,priority:r.predicates[i].priority});else switch(r.orientation){case"horizontal":n.orientation=w.HORIZONTAL,n.horizontal=!0,c(n,r.cascade,null);break;case"vertical":n.orientation=w.VERTICAL,c(n,r.cascade,null);break;case"horzvert":n.orientation=w.HORIZONTAL,n.horizontal=!0,c(n,r.cascade,null),n={constraints:n.constraints,lineIndex:n.lineIndex,subViews:n.subViews,orientation:w.VERTICAL},c(n,r.cascade,null);break;case"zIndex":n.orientation=w.ZINDEX,c(n,r.cascade,null)}return n.constraints}},{key:"parse",value:function(t,e){var r=e&&e.lineSeperator?e.lineSeperator:"\n";if(!Array.isArray(t)&&t.indexOf(r)<0)try{return this.parseLine(t,e)}catch(n){throw n.source=t,n}t=Array.isArray(t)?t:[t];var i=void 0,a=[],o=0,s=void 0,u={lineIndex:o,extended:e&&e.extended,strict:e&&void 0!==e.strict?e.strict:!0,outFormat:e?e.outFormat:void 0,subViews:{}};try{for(var c=0;c<t.length;c++){i=t[c].split(r);for(var l=0;l<i.length;l++)s=i[l],o++,u.lineIndex=o,u.strict||(s=s.trim()),(u.strict||s.length)&&(a=a.concat(this.parseLine(s,u)))}}catch(n){throw n.source=s,n.line=o,n}return a}},{key:"parseMetaInfo",value:function(t,e){var r=e&&e.lineSeperator?e.lineSeperator:"\n",n=e?e.prefix:void 0;t=Array.isArray(t)?t:[t];for(var i,a={},o=0;o<t.length;o++)for(var s=t[o].split(r),c=0;c<s.length;c++)for(var l=s[c],f=0;f<A.length;f++)for(var p=0;(n?2:1)>p;p++){var h=A[f],d=(0===p?"":n)+h;if(0===l.indexOf("//"+d+" "))for(var v=l.substring(3+d.length).split(" "),y=0;y<v.length;y++){a[h]=a[h]||{};for(var _=v[y].split(":"),g=u(_[0],!0),w=0;w<g.length;w++)a[h][g[w]]=_.length>1?_[1]:""}else 0===l.indexOf("//"+d+":")&&(a[h]=l.substring(3+d.length))}if(a.viewport){var m=a.viewport,b=m["aspect-ratio"];b&&(b=b.split("/"),m["aspect-ratio"]=parseInt(b[0])/parseInt(b[1])),void 0!==m.height&&(m.height="intrinsic"===m.height?!0:parseInt(m.height)),void 0!==m.width&&(m.width="intrinsic"===m.width?!0:parseInt(m.width)),void 0!==m["max-height"]&&(m["max-height"]=parseInt(m["max-height"])),void 0!==m["max-width"]&&(m["max-width"]=parseInt(m["max-width"])),void 0!==m["min-height"]&&(m["min-height"]=parseInt(m["min-height"])),void 0!==m["min-width"]&&(m["min-width"]=parseInt(m["min-width"]))}if(a.widths)for(i in a.widths){var E="intrinsic"===a.widths[i]?!0:parseInt(a.widths[i]);a.widths[i]=E,(void 0===E||isNaN(E))&&delete a.widths[i]}if(a.heights)for(i in a.heights){var C="intrinsic"===a.heights[i]?!0:parseInt(a.heights[i]);a.heights[i]=C,(void 0===C||isNaN(C))&&delete a.heights[i]}if(a.spacing){var V=JSON.parse(a.spacing);if(a.spacing=V,Array.isArray(V)){for(var x=0,I=V.length;I>x;x++)if(isNaN(V[x])){delete a.spacing;break}}else(void 0===V||isNaN(V))&&delete a.spacing}return a}}]),t}();e["default"]=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,i,a){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=i,this.column=a,this.name="SyntaxError"}function r(t){function r(){return Ot}function n(e){function r(e,r,n){var i,a;for(i=r;n>i;i++)a=t.charAt(i),"\n"===a?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return Mt!==e&&(Mt>e&&(Mt=0,Ht={line:1,column:1,seenCR:!1}),r(Ht,Mt,e),Mt=e),Ht}function i(t){Rt>kt||(kt>Rt&&(Rt=kt,Ft=[]),Ft.push(t))}function a(r,i,a){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,a,o=new Array(t.length);for(a=0;a<t.length;a++)o[a]=t[a].description;return n=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}var u=n(a),c=a<t.length?t.charAt(a):null;return null!==i&&o(i),new e(null!==r?r:s(i,c),i,c,a,u.line,u.column)}function o(){var e,r,n,a,o,f,p,h;if(e=kt,r=kt,n=s(),n!==C?(58===t.charCodeAt(kt)?(a=S,kt++):(a=C,0===zt&&i(k)),a!==C?(n=[n,a],r=n):(kt=r,r=I)):(kt=r,r=I),r===C&&(r=T),r!==C)if(n=kt,a=u(),a!==C?(o=l(),o!==C?(a=[a,o],n=a):(kt=n,n=I)):(kt=n,n=I),n===C&&(n=T),n!==C)if(a=c(),a!==C){for(o=[],f=kt,p=l(),p!==C?(h=c(),h!==C?(p=[p,h],f=p):(kt=f,f=I)):(kt=f,f=I);f!==C;)o.push(f),f=kt,p=l(),p!==C?(h=c(),h!==C?(p=[p,h],f=p):(kt=f,f=I)):(kt=f,f=I);o!==C?(f=kt,p=l(),p!==C?(h=u(),h!==C?(p=[p,h],f=p):(kt=f,f=I)):(kt=f,f=I),f===C&&(f=T),f!==C?(Ot=e,r=O(r,n,a,o,f),e=r):(kt=e,e=I)):(kt=e,e=I)}else kt=e,e=I;else kt=e,e=I;else kt=e,e=I;return e}function s(){var e,r;return e=kt,72===t.charCodeAt(kt)?(r=M,kt++):(r=C,0===zt&&i(H)),r===C&&(86===t.charCodeAt(kt)?(r=R,kt++):(r=C,0===zt&&i(F))),r!==C&&(Ot=e,r=z(r)),e=r}function u(){var e,r;return e=kt,124===t.charCodeAt(kt)?(r=N,kt++):(r=C,0===zt&&i(L)),r!==C&&(Ot=e,r=D()),e=r}function c(){var e,r,n,a,o;return e=kt,91===t.charCodeAt(kt)?(r=q,kt++):(r=C,0===zt&&i(Z)),r!==C?(n=w(),n!==C?(a=h(),a===C&&(a=T),a!==C?(93===t.charCodeAt(kt)?(o=P,kt++):(o=C,0===zt&&i(j)),o!==C?(Ot=e,r=X(n,a),e=r):(kt=e,e=I)):(kt=e,e=I)):(kt=e,e=I)):(kt=e,e=I),e}function l(){var e,r,n,a;return e=kt,45===t.charCodeAt(kt)?(r=G,kt++):(r=C,0===zt&&i(W)),r!==C?(n=f(),n!==C?(45===t.charCodeAt(kt)?(a=G,kt++):(a=C,0===zt&&i(W)),a!==C?(Ot=e,r=U(n),e=r):(kt=e,e=I)):(kt=e,e=I)):(kt=e,e=I),e===C&&(e=kt,45===t.charCodeAt(kt)?(r=G,kt++):(r=C,0===zt&&i(W)),r!==C&&(Ot=e,r=B()),e=r,e===C&&(e=kt,r=Q,r!==C&&(Ot=e,r=$()),e=r)),e}function f(){var t;return t=p(),t===C&&(t=h()),t}function p(){var t,e;return t=kt,e=A(),e!==C&&(Ot=t,e=Y(e)),t=e}function h(){var e,r,n,a,o,s,u;if(e=kt,40===t.charCodeAt(kt)?(r=J,kt++):(r=C,0===zt&&i(K)),r!==C)if(n=d(),n!==C){for(a=[],o=kt,44===t.charCodeAt(kt)?(s=tt,kt++):(s=C,0===zt&&i(et)),s!==C?(u=d(),u!==C?(s=[s,u],o=s):(kt=o,o=I)):(kt=o,o=I);o!==C;)a.push(o),o=kt,44===t.charCodeAt(kt)?(s=tt,kt++):(s=C,0===zt&&i(et)),s!==C?(u=d(),u!==C?(s=[s,u],o=s):(kt=o,o=I)):(kt=o,o=I);a!==C?(41===t.charCodeAt(kt)?(o=rt,kt++):(o=C,0===zt&&i(nt)),o!==C?(Ot=e,r=it(n,a),e=r):(kt=e,e=I)):(kt=e,e=I)}else kt=e,e=I;else kt=e,e=I;return e}function d(){var e,r,n,a,o,s;return e=kt,r=v(),r===C&&(r=T),r!==C?(n=y(),n!==C?(a=kt,64===t.charCodeAt(kt)?(o=at,kt++):(o=C,0===zt&&i(ot)),o!==C?(s=_(),s!==C?(o=[o,s],a=o):(kt=a,a=I)):(kt=a,a=I),a===C&&(a=T),a!==C?(Ot=e,r=st(r,n,a),e=r):(kt=e,e=I)):(kt=e,e=I)):(kt=e,e=I),e}function v(){var e,r;return e=kt,t.substr(kt,2)===ut?(r=ut,kt+=2):(r=C,0===zt&&i(ct)),r!==C&&(Ot=e,r=lt()),e=r,e===C&&(e=kt,t.substr(kt,2)===ft?(r=ft,kt+=2):(r=C,0===zt&&i(pt)),r!==C&&(Ot=e,r=ht()),e=r,e===C&&(e=kt,t.substr(kt,2)===dt?(r=dt,kt+=2):(r=C,0===zt&&i(vt)),r!==C&&(Ot=e,r=yt()),e=r)),e}function y(){var t;return t=g(),t===C&&(t=w()),t}function _(){var e,r,n;if(e=kt,r=[],_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt));else r=I;return r!==C&&(Ot=e,r=wt(r)),e=r}function g(){var t,e;return t=kt,e=A(),e!==C&&(Ot=t,e=At(e)),t=e}function w(){var e,r,n,a,o;if(e=kt,r=kt,n=[],mt.test(t.charAt(kt))?(a=t.charAt(kt),kt++):(a=C,0===zt&&i(bt)),a!==C)for(;a!==C;)n.push(a),mt.test(t.charAt(kt))?(a=t.charAt(kt),kt++):(a=C,0===zt&&i(bt));else n=I;if(n!==C&&(n=t.substring(r,kt)),r=n,r!==C){for(n=kt,a=[],Et.test(t.charAt(kt))?(o=t.charAt(kt),kt++):(o=C,0===zt&&i(Ct));o!==C;)a.push(o),Et.test(t.charAt(kt))?(o=t.charAt(kt),kt++):(o=C,0===zt&&i(Ct));a!==C&&(a=t.substring(n,kt)),n=a,n!==C?(Ot=e,r=Vt(r,n),e=r):(kt=e,e=I)}else kt=e,e=I;return e}function A(){var e,r,n,a,o;if(e=kt,r=[],_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt));else r=I;if(r!==C)if(46===t.charCodeAt(kt)?(n=xt,kt++):(n=C,0===zt&&i(It)),n!==C){if(a=[],_t.test(t.charAt(kt))?(o=t.charAt(kt),kt++):(o=C,0===zt&&i(gt)),o!==C)for(;o!==C;)a.push(o),_t.test(t.charAt(kt))?(o=t.charAt(kt),kt++):(o=C,0===zt&&i(gt));else a=I;a!==C?(Ot=e,r=Tt(r,a),e=r):(kt=e,e=I)}else kt=e,e=I;else kt=e,e=I;if(e===C){if(e=kt,r=[],_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(kt))?(n=t.charAt(kt),kt++):(n=C,0===zt&&i(gt));else r=I;r!==C&&(Ot=e,r=St(r)),e=r}return e}function m(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}var b,E=arguments.length>1?arguments[1]:{},C={},V={visualFormatString:o},x=o,I=C,T=null,S=":",k={type:"literal",value:":",description:'":"'},O=function(t,e,r,n,i){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat([r],[].concat.apply([],n),i||[])}},M="H",H={type:"literal",value:"H",description:'"H"'},R="V",F={type:"literal",value:"V",description:'"V"'},z=function(t){return"H"==t?"horizontal":"vertical"},N="|",L={type:"literal",value:"|",description:'"|"'},D=function(){return{view:null}},q="[",Z={type:"literal",value:"[",description:'"["'},P="]",j={type:"literal",value:"]",description:'"]"'},X=function(t,e){return m(t,e?{constraints:e}:{})},G="-",W={type:"literal",value:"-",description:'"-"'},U=function(t){return t},B=function(){return[{relation:"equ",constant:"default",$parserOffset:r()}]},Q="",$=function(){return[{relation:"equ",constant:0,$parserOffset:r()}]},Y=function(t){return[{relation:"equ",constant:t,$parserOffset:r()}]},J="(",K={type:"literal",value:"(",description:'"("'},tt=",",et={type:"literal",value:",",description:'","'},rt=")",nt={type:"literal",value:")",description:'")"'},it=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},at="@",ot={type:"literal",value:"@",description:'"@"'},st=function(t,e,r){return m({relation:"equ"},t||{},e,r?r[1]:{})},ut="==",ct={type:"literal",value:"==",description:'"=="'},lt=function(){return{relation:"equ",$parserOffset:r()}},ft="<=",pt={type:"literal",value:"<=",description:'"<="'},ht=function(){return{relation:"leq",$parserOffset:r()}},dt=">=",vt={type:"literal",value:">=",description:'">="'},yt=function(){return{relation:"geq",$parserOffset:r()}},_t=/^[0-9]/,gt={type:"class",value:"[0-9]",description:"[0-9]"},wt=function(t){return{priority:parseInt(t.join(""),10)}},At=function(t){return{constant:t}},mt=/^[a-zA-Z_]/,bt={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Et=/^[a-zA-Z0-9_]/,Ct={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},Vt=function(t,e){return{view:t+e}},xt=".",It={type:"literal",value:".",description:'"."'},Tt=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},St=function(t){return parseInt(t.join(""),10)},kt=0,Ot=0,Mt=0,Ht={line:1,column:1,seenCR:!1},Rt=0,Ft=[],zt=0;if("startRule"in E){if(!(E.startRule in V))throw new Error("Can't start parsing from rule \""+E.startRule+'".');x=V[E.startRule]}if(b=x(),b!==C&&kt===t.length)return b;throw b!==C&&kt<t.length&&i({type:"end",description:"end of input"}),a(null,Ft,Rt)}return t(e,Error),{SyntaxError:e,parse:r}}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,i,a){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=i,this.column=a,this.name="SyntaxError"}function r(t){function r(){return gr}function n(e){function r(e,r,n){var i,a;for(i=r;n>i;i++)a=t.charAt(i),"\n"===a?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return wr!==e&&(wr>e&&(wr=0,Ar={line:1,column:1,seenCR:!1}),r(Ar,wr,e),wr=e),Ar}function i(t){mr>_r||(_r>mr&&(mr=_r,br=[]),br.push(t))}function a(r,i,a){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function s(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,a,o=new Array(t.length);for(a=0;a<t.length;a++)o[a]=t[a].description;return n=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}var u=n(a),c=a<t.length?t.charAt(a):null;return null!==i&&o(i),new e(null!==r?r:s(i,c),i,c,a,u.line,u.column)}function o(){var t;return t=l(),t===q&&(t=s()),t}function s(){var t,e,r,n,i;return t=_r,e=u(),e!==q?(r=c(),r!==q?(n=g(),n!==q?(i=p(),i===q&&(i=X),i!==q?(gr=t,e=G(r,n,i),t=e):(_r=t,t=j)):(_r=t,t=j)):(_r=t,t=j)):(_r=t,t=j),t}function u(){var e,r;return e=_r,t.substr(_r,2)===W?(r=W,_r+=2):(r=q,0===Er&&i(U)),r!==q&&(gr=e,r=B()),e=r}function c(){var t,e,r;return t=_r,e=R(),e!==q?(r=k(),r!==q?(gr=t,e=Q(e,r),t=e):(_r=t,t=j)):(_r=t,t=j),t}function l(){var e,r,n,a,o,s,u,c;if(e=_r,r=_r,n=f(),n!==q?(58===t.charCodeAt(_r)?(a=$,_r++):(a=q,0===Er&&i(Y)),a!==q?(n=[n,a],r=n):(_r=r,r=j)):(_r=r,r=j),r===q&&(r=X),r!==q)if(n=_r,a=h(),a!==q?(o=_(),o!==q?(a=[a,o],n=a):(_r=n,n=j)):(_r=n,n=j),n===q&&(n=X),n!==q)if(a=d(),a!==q){for(o=[],s=_r,u=_(),u!==q?(c=d(),c!==q?(u=[u,c],s=u):(_r=s,s=j)):(_r=s,s=j);s!==q;)o.push(s),s=_r,u=_(),u!==q?(c=d(),c!==q?(u=[u,c],s=u):(_r=s,s=j)):(_r=s,s=j);o!==q?(s=_r,u=_(),u!==q?(c=h(),c!==q?(u=[u,c],s=u):(_r=s,s=j)):(_r=s,s=j),s===q&&(s=X),s!==q?(u=p(),u===q&&(u=X),u!==q?(gr=e,r=J(r,n,a,o,s,u),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;else _r=e,e=j;return e}function f(){var e,r;return e=_r,t.substr(_r,2)===K?(r=K,_r+=2):(r=q,0===Er&&i(tt)),r!==q&&(gr=e,r=et()),e=r,e===q&&(e=_r,72===t.charCodeAt(_r)?(r=rt,_r++):(r=q,0===Er&&i(nt)),r!==q&&(gr=e,r=it()),e=r,e===q&&(e=_r,86===t.charCodeAt(_r)?(r=at,_r++):(r=q,0===Er&&i(ot)),r!==q&&(gr=e,r=st()),e=r,e===q&&(e=_r,90===t.charCodeAt(_r)?(r=ut,_r++):(r=q,0===Er&&i(ct)),r!==q&&(gr=e,r=lt()),e=r))),e}function p(){var e,r,n,a,o;for(e=_r,r=[],32===t.charCodeAt(_r)?(n=ft,_r++):(n=q,0===Er&&i(pt));n!==q;)r.push(n),32===t.charCodeAt(_r)?(n=ft,_r++):(n=q,0===Er&&i(pt));if(r!==q)if(t.substr(_r,2)===ht?(n=ht,_r+=2):(n=q,0===Er&&i(dt)),n!==q){for(a=[],t.length>_r?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(vt));o!==q;)a.push(o),t.length>_r?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(vt));a!==q?(r=[r,n,a],e=r):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;return e}function h(){var e,r;return e=_r,124===t.charCodeAt(_r)?(r=yt,_r++):(r=q,0===Er&&i(_t)),r!==q&&(gr=e,r=gt()),e=r}function d(){var e,r,n,a,o,s,u;if(e=_r,91===t.charCodeAt(_r)?(r=wt,_r++):(r=q,0===Er&&i(At)),r!==q)if(n=v(),n!==q){for(a=[],o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=v(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);o!==q;)a.push(o),o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=v(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);a!==q?(93===t.charCodeAt(_r)?(o=Et,_r++):(o=q,0===Er&&i(Ct)),o!==q?(gr=e,r=Vt(n,a),e=r):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;return e}function v(){var t,e,r,n;return t=_r,e=H(),e!==q?(r=A(),r===q&&(r=X),r!==q?(n=y(),n===q&&(n=X),n!==q?(gr=t,e=xt(e,r,n),t=e):(_r=t,t=j)):(_r=t,t=j)):(_r=t,t=j),t}function y(){var e,r,n,a,o,s;if(e=_r,58===t.charCodeAt(_r)?(r=$,_r++):(r=q,0===Er&&i(Y)),r!==q){if(n=[],a=_r,o=_(),o!==q?(s=d(),s!==q?(o=[o,s],a=o):(_r=a,a=j)):(_r=a,a=j),a!==q)for(;a!==q;)n.push(a),a=_r,o=_(),o!==q?(s=d(),s!==q?(o=[o,s],a=o):(_r=a,a=j)):(_r=a,a=j);else n=j;n!==q?(a=_(),a!==q?(gr=e,r=It(n,a),e=r):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;return e}function _(){var e,r,n,a;return e=_r,t.substr(_r,2)===Tt?(r=Tt,_r+=2):(r=q,0===Er&&i(St)),r!==q&&(gr=e,r=kt()),e=r,e===q&&(e=_r,45===t.charCodeAt(_r)?(r=Ot,_r++):(r=q,0===Er&&i(Mt)),r!==q?(n=g(),n!==q?(45===t.charCodeAt(_r)?(a=Ot,_r++):(a=q,0===Er&&i(Mt)),a!==q?(gr=e,r=Ht(n),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,45===t.charCodeAt(_r)?(r=Ot,_r++):(r=q,0===Er&&i(Mt)),r!==q&&(gr=e,r=Rt()),e=r,e===q&&(e=_r,126===t.charCodeAt(_r)?(r=Ft,_r++):(r=q,0===Er&&i(zt)),r!==q?(n=b(),n!==q?(126===t.charCodeAt(_r)?(a=Ft,_r++):(a=q,0===Er&&i(zt)),a!==q?(gr=e,r=Ht(n),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,126===t.charCodeAt(_r)?(r=Ft,_r++):(r=q,0===Er&&i(zt)),r!==q&&(gr=e,r=Nt()),e=r,e===q&&(e=_r,r=Lt,r!==q&&(gr=e,r=Dt()),e=r))))),e}function g(){var t;return t=w(),t===q&&(t=A()),t}function w(){var t,e;return t=_r,e=T(),e!==q&&(gr=t,e=qt(e)),t=e,t===q&&(t=_r,e=z(),e!==q&&(gr=t,e=Zt(e)),t=e),t}function A(){var e,r,n,a,o,s,u;if(e=_r,40===t.charCodeAt(_r)?(r=Pt,_r++):(r=q,0===Er&&i(jt)),r!==q)if(n=m(),n!==q){for(a=[],o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=m(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);o!==q;)a.push(o),o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=m(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);a!==q?(41===t.charCodeAt(_r)?(o=Xt,_r++):(o=q,0===Er&&i(Gt)),o!==q?(gr=e,r=Wt(n,a),e=r):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;return e}function m(){var e,r,n,a,o,s;return e=_r,r=C(),r===q&&(r=X),r!==q?(n=V(),n!==q?(a=_r,64===t.charCodeAt(_r)?(o=Ut,_r++):(o=q,0===Er&&i(Bt)),o!==q?(s=x(),s!==q?(o=[o,s],a=o):(_r=a,a=j)):(_r=a,a=j),a===q&&(a=X),a!==q?(gr=e,r=Qt(r,n,a),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j),e}function b(){var e,r,n,a,o,s,u;if(e=_r,40===t.charCodeAt(_r)?(r=Pt,_r++):(r=q,0===Er&&i(jt)),r!==q)if(n=E(),n!==q){for(a=[],o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=E(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);o!==q;)a.push(o),o=_r,44===t.charCodeAt(_r)?(s=mt,_r++):(s=q,0===Er&&i(bt)),s!==q?(u=E(),u!==q?(s=[s,u],o=s):(_r=o,o=j)):(_r=o,o=j);a!==q?(41===t.charCodeAt(_r)?(o=Xt,_r++):(o=q,0===Er&&i(Gt)),o!==q?(gr=e,r=Wt(n,a),e=r):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;return e}function E(){var e,r,n,a,o,s;return e=_r,r=C(),r===q&&(r=X),r!==q?(n=V(),n!==q?(a=_r,64===t.charCodeAt(_r)?(o=Ut,_r++):(o=q,0===Er&&i(Bt)),o!==q?(s=x(),s!==q?(o=[o,s],a=o):(_r=a,a=j)):(_r=a,a=j),a===q&&(a=X),a!==q?(gr=e,r=$t(r,n,a),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j),e}function C(){var e,r;return e=_r,t.substr(_r,2)===Yt?(r=Yt,_r+=2):(r=q,0===Er&&i(Jt)),r!==q&&(gr=e,r=Kt()),e=r,e===q&&(e=_r,t.substr(_r,2)===te?(r=te,_r+=2):(r=q,0===Er&&i(ee)),r!==q&&(gr=e,r=re()),e=r,e===q&&(e=_r,t.substr(_r,2)===ne?(r=ne,_r+=2):(r=q,0===Er&&i(ie)),r!==q&&(gr=e,r=ae()),e=r)),e}function V(){var t;return t=T(),t===q&&(t=I(),t===q&&(t=S())),t}function x(){var e,r,n;if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se)),n!==q)for(;n!==q;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se));else r=j;return r!==q&&(gr=e,r=ue(r)),e=r}function I(){var e,r,n;return e=_r,r=z(),r!==q&&(gr=e,r=ce(r)),e=r,e===q&&(e=_r,45===t.charCodeAt(_r)?(r=Ot,_r++):(r=q,0===Er&&i(Mt)),r!==q?(n=z(),n!==q?(gr=e,r=le(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=q,0===Er&&i(pe)),r!==q?(n=z(),n!==q?(gr=e,r=ce(n),e=r):(_r=e,e=j)):(_r=e,e=j))),e}function T(){var e,r,n,a;return e=_r,r=z(),r!==q?(37===t.charCodeAt(_r)?(n=he,_r++):(n=q,0===Er&&i(de)),n!==q?(gr=e,r=ve(r),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,45===t.charCodeAt(_r)?(r=Ot,_r++):(r=q,0===Er&&i(Mt)),r!==q?(n=z(),n!==q?(37===t.charCodeAt(_r)?(a=he,_r++):(a=q,0===Er&&i(de)),a!==q?(gr=e,r=ye(n),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=q,0===Er&&i(pe)),r!==q?(n=z(),n!==q?(37===t.charCodeAt(_r)?(a=he,_r++):(a=q,0===Er&&i(de)),a!==q?(gr=e,r=ve(n),e=r):(_r=e,e=j)):(_r=e,e=j)):(_r=e,e=j))),e}function S(){var t,e,r,n,i;return t=_r,e=R(),e!==q?(r=k(),r===q&&(r=X),r!==q?(n=O(),n===q&&(n=X),n!==q?(i=M(),i===q&&(i=X),i!==q?(gr=t,e=_e(e,r,n,i),t=e):(_r=t,t=j)):(_r=t,t=j)):(_r=t,t=j)):(_r=t,t=j),t}function k(){var e,r;return e=_r,t.substr(_r,5)===ge?(r=ge,_r+=5):(r=q,0===Er&&i(we)),r!==q&&(gr=e,r=Ae()),e=r,e===q&&(e=_r,t.substr(_r,6)===me?(r=me,_r+=6):(r=q,0===Er&&i(be)),r!==q&&(gr=e,r=Ee()),e=r,e===q&&(e=_r,t.substr(_r,4)===Ce?(r=Ce,_r+=4):(r=q,0===Er&&i(Ve)),r!==q&&(gr=e,r=xe()),e=r,e===q&&(e=_r,t.substr(_r,7)===Ie?(r=Ie,_r+=7):(r=q,0===Er&&i(Te)),r!==q&&(gr=e,r=Se()),e=r,e===q&&(e=_r,t.substr(_r,6)===ke?(r=ke,_r+=6):(r=q,0===Er&&i(Oe)),r!==q&&(gr=e,r=Me()),e=r,e===q&&(e=_r,t.substr(_r,7)===He?(r=He,_r+=7):(r=q,0===Er&&i(Re)),r!==q&&(gr=e,r=Fe()),e=r,e===q&&(e=_r,t.substr(_r,8)===ze?(r=ze,_r+=8):(r=q,0===Er&&i(Ne)),r!==q&&(gr=e,r=Le()),e=r,e===q&&(e=_r,t.substr(_r,8)===De?(r=De,_r+=8):(r=q,0===Er&&i(qe)),r!==q&&(gr=e,r=Ze()),e=r))))))),e}function O(){var e,r,n;return e=_r,47===t.charCodeAt(_r)?(r=Pe,_r++):(r=q,0===Er&&i(je)),r!==q?(n=z(),n!==q?(gr=e,r=Xe(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,t.substr(_r,2)===Ge?(r=Ge,_r+=2):(r=q,0===Er&&i(We)),r!==q?(n=z(),n!==q?(gr=e,r=Xe(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,t.substr(_r,2)===Ue?(r=Ue,_r+=2):(r=q,0===Er&&i(Be)),r!==q?(n=z(),n!==q?(gr=e,r=Qe(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,42===t.charCodeAt(_r)?(r=$e,_r++):(r=q,0===Er&&i(Ye)),r!==q?(n=z(),n!==q?(gr=e,r=Je(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,t.substr(_r,2)===Ke?(r=Ke,_r+=2):(r=q,0===Er&&i(tr)),r!==q?(n=z(),n!==q?(gr=e,r=Je(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,t.substr(_r,2)===er?(r=er,_r+=2):(r=q,0===Er&&i(rr)),r!==q?(n=z(),n!==q?(gr=e,r=nr(n),e=r):(_r=e,e=j)):(_r=e,e=j)))))),e}function M(){var e,r,n;return e=_r,45===t.charCodeAt(_r)?(r=Ot,_r++):(r=q,0===Er&&i(Mt)),r!==q?(n=z(),n!==q?(gr=e,r=nr(n),e=r):(_r=e,e=j)):(_r=e,e=j),e===q&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=q,0===Er&&i(pe)),r!==q?(n=z(),n!==q?(gr=e,r=Je(n),e=r):(_r=e,e=j)):(_r=e,e=j)),e}function H(){var e,r,n,a,o;if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar)),a!==q)for(;a!==q;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar));else n=j;if(n!==q&&(n=t.substring(r,_r)),r=n,r!==q){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(sr));o!==q;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(sr));a!==q&&(a=t.substring(n,_r)),n=a,n!==q?(a=F(),a!==q?(gr=e,r=ur(r,n,a),e=r):(_r=e,e=j)):(_r=e,e=j)}else _r=e,e=j;if(e===q){if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar)),a!==q)for(;a!==q;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar));else n=j;if(n!==q&&(n=t.substring(r,_r)),r=n,r!==q){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(sr));o!==q;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(sr));a!==q&&(a=t.substring(n,_r)),n=a,n!==q?(gr=e,r=cr(r,n),e=r):(_r=e,e=j)}else _r=e,e=j}return e}function R(){var e,r,n,a,o;if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar)),a!==q)for(;a!==q;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(ar));else n=j;if(n!==q&&(n=t.substring(r,_r)),r=n,r!==q){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),
_r++):(o=q,0===Er&&i(sr));o!==q;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(sr));a!==q&&(a=t.substring(n,_r)),n=a,n!==q?(gr=e,r=cr(r,n),e=r):(_r=e,e=j)}else _r=e,e=j;return e}function F(){var e,r,n,a;if(e=_r,t.substr(_r,2)===lr?(r=lr,_r+=2):(r=q,0===Er&&i(fr)),r!==q){if(n=[],oe.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(se)),a!==q)for(;a!==q;)n.push(a),oe.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=q,0===Er&&i(se));else n=j;n!==q?(gr=e,r=pr(n),e=r):(_r=e,e=j)}else _r=e,e=j;return e}function z(){var e,r,n,a,o;if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se)),n!==q)for(;n!==q;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se));else r=j;if(r!==q)if(46===t.charCodeAt(_r)?(n=hr,_r++):(n=q,0===Er&&i(dr)),n!==q){if(a=[],oe.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(se)),o!==q)for(;o!==q;)a.push(o),oe.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=q,0===Er&&i(se));else a=j;a!==q?(gr=e,r=vr(r,a),e=r):(_r=e,e=j)}else _r=e,e=j;else _r=e,e=j;if(e===q){if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se)),n!==q)for(;n!==q;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=q,0===Er&&i(se));else r=j;r!==q&&(gr=e,r=yr(r)),e=r}return e}function N(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}var L,D=arguments.length>1?arguments[1]:{},q={},Z={visualFormatStringExt:o},P=o,j=q,X=null,G=function(t,e,r){return{type:"attribute",view:t.view,attr:t.attr,predicates:e}},W="A:",U={type:"literal",value:"A:",description:'"A:"'},B=function(){return"attribute"},Q=function(t,e){return{view:t.view,attr:e}},$=":",Y={type:"literal",value:":",description:'":"'},J=function(t,e,r,n,i,a){return{type:"vfl",orientation:t?t[0]:"horizontal",cascade:(e||[]).concat(r,[].concat.apply([],n),i||[])}},K="HV",tt={type:"literal",value:"HV",description:'"HV"'},et=function(){return"horzvert"},rt="H",nt={type:"literal",value:"H",description:'"H"'},it=function(){return"horizontal"},at="V",ot={type:"literal",value:"V",description:'"V"'},st=function(){return"vertical"},ut="Z",ct={type:"literal",value:"Z",description:'"Z"'},lt=function(){return"zIndex"},ft=" ",pt={type:"literal",value:" ",description:'" "'},ht="//",dt={type:"literal",value:"//",description:'"//"'},vt={type:"any",description:"any character"},yt="|",_t={type:"literal",value:"|",description:'"|"'},gt=function(){return{view:null}},wt="[",At={type:"literal",value:"[",description:'"["'},mt=",",bt={type:"literal",value:",",description:'","'},Et="]",Ct={type:"literal",value:"]",description:'"]"'},Vt=function(t,e){return e.length?[t].concat([].concat.apply([],e)):t},xt=function(t,e,r){return N(N(t,e?{constraints:e}:{}),r?{cascade:r}:{})},It=function(t,e){return[].concat([].concat.apply([],t),[e])},Tt="->",St={type:"literal",value:"->",description:'"->"'},kt=function(){return[{relation:"none"}]},Ot="-",Mt={type:"literal",value:"-",description:'"-"'},Ht=function(t){return t},Rt=function(){return[{relation:"equ",constant:"default"}]},Ft="~",zt={type:"literal",value:"~",description:'"~"'},Nt=function(){return[{relation:"equ",equalSpacing:!0}]},Lt="",Dt=function(){return[{relation:"equ",constant:0}]},qt=function(t){return[{relation:"equ",multiplier:t.multiplier}]},Zt=function(t){return[{relation:"equ",constant:t}]},Pt="(",jt={type:"literal",value:"(",description:'"("'},Xt=")",Gt={type:"literal",value:")",description:'")"'},Wt=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},Ut="@",Bt={type:"literal",value:"@",description:'"@"'},Qt=function(t,e,r){return N({relation:"equ"},t||{},e,r?r[1]:{})},$t=function(t,e,r){return N({relation:"equ",equalSpacing:!0},t||{},e,r?r[1]:{})},Yt="==",Jt={type:"literal",value:"==",description:'"=="'},Kt=function(){return{relation:"equ"}},te="<=",ee={type:"literal",value:"<=",description:'"<="'},re=function(){return{relation:"leq"}},ne=">=",ie={type:"literal",value:">=",description:'">="'},ae=function(){return{relation:"geq"}},oe=/^[0-9]/,se={type:"class",value:"[0-9]",description:"[0-9]"},ue=function(t){return{priority:parseInt(t.join(""),10)}},ce=function(t){return{constant:t}},le=function(t){return{constant:-t}},fe="+",pe={type:"literal",value:"+",description:'"+"'},he="%",de={type:"literal",value:"%",description:'"%"'},ve=function(t){return{view:null,multiplier:t/100}},ye=function(t){return{view:null,multiplier:t/-100}},_e=function(t,e,r,n){return{view:t.view,attribute:e?e:void 0,multiplier:r?r:1,constant:n?n:void 0}},ge=".left",we={type:"literal",value:".left",description:'".left"'},Ae=function(){return"left"},me=".right",be={type:"literal",value:".right",description:'".right"'},Ee=function(){return"right"},Ce=".top",Ve={type:"literal",value:".top",description:'".top"'},xe=function(){return"top"},Ie=".bottom",Te={type:"literal",value:".bottom",description:'".bottom"'},Se=function(){return"bottom"},ke=".width",Oe={type:"literal",value:".width",description:'".width"'},Me=function(){return"width"},He=".height",Re={type:"literal",value:".height",description:'".height"'},Fe=function(){return"height"},ze=".centerX",Ne={type:"literal",value:".centerX",description:'".centerX"'},Le=function(){return"centerX"},De=".centerY",qe={type:"literal",value:".centerY",description:'".centerY"'},Ze=function(){return"centerY"},Pe="/",je={type:"literal",value:"/",description:'"/"'},Xe=function(t){return 1/t},Ge="/+",We={type:"literal",value:"/+",description:'"/+"'},Ue="/-",Be={type:"literal",value:"/-",description:'"/-"'},Qe=function(t){return-1/t},$e="*",Ye={type:"literal",value:"*",description:'"*"'},Je=function(t){return t},Ke="*+",tr={type:"literal",value:"*+",description:'"*+"'},er="*-",rr={type:"literal",value:"*-",description:'"*-"'},nr=function(t){return-t},ir=/^[a-zA-Z_]/,ar={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},or=/^[a-zA-Z0-9_]/,sr={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ur=function(t,e,n){return{view:t+e,range:n,$parserOffset:r()}},cr=function(t,e){return{view:t+e,$parserOffset:r()}},lr="..",fr={type:"literal",value:"..",description:'".."'},pr=function(t){return parseInt(t)},hr=".",dr={type:"literal",value:".",description:'"."'},vr=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},yr=function(t){return parseInt(t.join(""),10)},_r=0,gr=0,wr=0,Ar={line:1,column:1,seenCR:!1},mr=0,br=[],Er=0;if("startRule"in D){if(!(D.startRule in Z))throw new Error("Can't start parsing from rule \""+D.startRule+'".');P=Z[D.startRule]}if(L=P(),L!==q&&_r===t.length)return L;throw L!==q&&_r<t.length&&i({type:"end",description:"end of input"}),a(null,br,mr)}return t(e,Error),{SyntaxError:e,parse:r}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var r=new p["default"].Variable;return this._solver.addConstraint(new p["default"].Constraint(r,p["default"].Operator.Eq,e)),r}function o(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new g["default"]({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new g["default"]({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function s(t){var e=4;if(t.view1||"left"!==t.attr1)if(t.view1||"top"!==t.attr1)if(t.view2||"right"!==t.attr2)if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2;else e=1;else e=0;else e=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[e]||(this._spacingVars[e]=new p["default"].Variable,this._solver.addEditVariable(this._spacingVars[e],p["default"].Strength.create(999,1e3,1e3)),this._spacingExpr[e]=this._spacingVars[e].multiply(-1),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}function u(t){var e=void 0,r=void 0!==t.multiplier?t.multiplier:1,n=void 0!==t.constant?t.constant:0;"default"===n&&(n=s.call(this,t));var i=o.call(this,t.view1)._getAttr(t.attr1),u=void 0;t.attr2===d["default"].CONST?u=a.call(this,void 0,t.constant):(u=o.call(this,t.view2)._getAttr(t.attr2),1!==r&&n?u=u.multiply(r).plus(n):n?u=u.plus(n):1!==r&&(u=u.multiply(r)));var c=void 0!==t.priority&&t.priority<1e3?p["default"].Strength.create(0,t.priority,1e3):w;switch(t.relation){case y["default"].EQU:e=new p["default"].Constraint(i,p["default"].Operator.Eq,u,c);break;case y["default"].GEQ:e=new p["default"].Constraint(i,p["default"].Operator.Ge,u,c);break;case y["default"].LEQ:e=new p["default"].Constraint(i,p["default"].Operator.Le,u,c);break;default:throw"Invalid relation specified: "+t.relation}this._solver.addConstraint(e)}function c(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var r=0;7>r;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=r(8),p=n(f),h=r(1),d=n(h),v=r(2),y=n(v),_=r(9),g=n(_),w=p["default"].Strength.create(0,1e3,1e3),A=function(){function t(e){i(this,t),this._solver=new p["default"].Solver,this._subViews={},this._parentSubView=new g["default"]({solver:this._solver}),this.setSpacing(e&&void 0!==e.spacing?e.spacing:8),e&&(void 0===e.width&&void 0===e.height||this.setSize(e.width,e.height),e.constraints&&this.addConstraints(e.constraints))}return l(t,[{key:"setSize",value:function(t,e){return this._parentSubView.intrinsicWidth=t,this._parentSubView.intrinsicHeight=e,this}},{key:"setSpacing",value:function(t){switch(Array.isArray(t)?t.length:-1){case-1:t=[t,t,t,t,t,t,1];break;case 1:t=[t[0],t[0],t[0],t[0],t[0],t[0],1];break;case 2:t=[t[1],t[0],t[1],t[0],t[0],t[1],1];break;case 3:t=[t[1],t[0],t[1],t[0],t[0],t[1],t[2]];break;case 6:t=[t[0],t[1],t[2],t[3],t[4],t[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!c(this._spacing,t)&&(this._spacing=t,this._spacingVars)){for(var e=0;e<this._spacingVars.length;e++)this._spacingVars[e]&&this._solver.suggestValue(this._spacingVars[e],this._spacing[e]);this._solver.updateVariables()}return this}},{key:"addConstraint",value:function(t){return u.call(this,t),this._solver.updateVariables(),this}},{key:"addConstraints",value:function(t){for(var e=0;e<t.length;e++)u.call(this,t[e]);return this._solver.updateVariables(),this}},{key:"width",get:function(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function(){return this._parentSubView.width}},{key:"fittingHeight",get:function(){return this._parentSubView.height}},{key:"subViews",get:function(){return this._subViews}}]),t}();e["default"]=A},function(t,e,r){var n,i;!function(r,a){n=[],i=function(){return r.kiwi=a()}.apply(e,n),!(void 0!==i&&(t.exports=i))}(this,function(){var t;!function(t){function e(t){return t instanceof Array?new a(t):t.__iter__()}function r(t){return t instanceof Array?new o(t):t.__reversed__()}function n(t){return t.__next__()}function i(t,e){if(t instanceof Array){for(var r=0,n=t.length;n>r;++r)if(e(t[r])===!1)return}else for(var i,a=t.__iter__();void 0!==(i=a.__next__());)if(e(i)===!1)return}var a=function(){function t(t,e){"undefined"==typeof e&&(e=0),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[this._index++]},t.prototype.__iter__=function(){return this},t}();t.ArrayIterator=a;var o=function(){function t(t,e){"undefined"==typeof e&&(e=t.length),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[--this._index]},t.prototype.__iter__=function(){return this},t}();t.ReverseArrayIterator=o,t.iter=e,t.reversed=r,t.next=n,t.forEach=i}(t||(t={}));var t;!function(t){var e=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}();t.Pair=e}(t||(t={}));var t;!function(t){function e(t,e,r){for(var n,i,a=0,o=t.length;o>0;)n=o>>1,i=a+n,r(t[i],e)<0?(a=i+1,o-=n+1):o=n;return a}function r(t,r,n){var i=e(t,r,n);if(i===t.length)return-1;var a=t[i];return 0!==n(a,r)?-1:i}function n(t,r,n){var i=e(t,r,n);if(i!==t.length){var a=t[i];if(0===n(a,r))return a}}t.lowerBound=e,t.binarySearch=r,t.binaryFind=n}(t||(t={}));var t;!function(t){var e=function(){function e(){this._array=[]}return e.prototype.size=function(){return this._array.length},e.prototype.empty=function(){return 0===this._array.length},e.prototype.itemAt=function(t){return this._array[t]},e.prototype.takeAt=function(t){return this._array.splice(t,1)[0]},e.prototype.clear=function(){this._array=[]},e.prototype.swap=function(t){var e=this._array;this._array=t._array,t._array=e},e.prototype.__iter__=function(){return t.iter(this._array)},e.prototype.__reversed__=function(){return t.reversed(this._array)},e}();t.ArrayBase=e}(t||(t={}));var t,e=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r};!function(t){function r(t){return function(e,r){return t(e.first,r)}}function n(t,e,r){for(var n=0,i=0,a=t.length,o=e.length,s=[];a>n&&o>i;){var u=t[n],c=e[i],l=r(u.first,c.first);0>l?(s.push(u.copy()),++n):l>0?(s.push(c.copy()),++i):(s.push(c.copy()),++n,++i)}for(;a>n;)s.push(t[n].copy()),++n;for(;o>i;)s.push(e[i].copy()),++i;return s}var i=function(i){function a(t){i.call(this),this._compare=t,this._wrapped=r(t)}return e(a,i),a.prototype.comparitor=function(){return this._compare},a.prototype.indexOf=function(e){return t.binarySearch(this._array,e,this._wrapped)},a.prototype.contains=function(e){return t.binarySearch(this._array,e,this._wrapped)>=0},a.prototype.find=function(e){return t.binaryFind(this._array,e,this._wrapped)},a.prototype.setDefault=function(e,r){var n=this._array,i=t.lowerBound(n,e,this._wrapped);if(i===n.length){var a=new t.Pair(e,r());return n.push(a),a}var o=n[i];if(0!==this._compare(o.first,e)){var a=new t.Pair(e,r());return n.splice(i,0,a),a}return o},a.prototype.insert=function(e,r){var n=this._array,i=t.lowerBound(n,e,this._wrapped);if(i===n.length){var a=new t.Pair(e,r);return n.push(a),a}var o=n[i];if(0!==this._compare(o.first,e)){var a=new t.Pair(e,r);return n.splice(i,0,a),a}return o.second=r,o},a.prototype.update=function(e){var r=this;if(e instanceof a){var i=e;this._array=n(this._array,i._array,this._compare)}else t.forEach(e,function(t){r.insert(t.first,t.second)})},a.prototype.erase=function(e){var r=this._array,n=t.binarySearch(r,e,this._wrapped);return 0>n?void 0:r.splice(n,1)[0]},a.prototype.copy=function(){for(var t=new a(this._compare),e=t._array,r=this._array,n=0,i=r.length;i>n;++n)e.push(r[n].copy());return t},a}(t.ArrayBase);t.AssociativeArray=i}(t||(t={}));var r;!function(t){!function(t){t[t.Le=0]="Le",t[t.Ge=1]="Ge",t[t.Eq=2]="Eq"}(t.Operator||(t.Operator={}));var e=(t.Operator,function(){function e(e,n,i,a){void 0===a&&(a=t.Strength.required),this._id=r++,this._operator=n,this._strength=t.Strength.clip(a),void 0===i&&e instanceof t.Expression?this._expression=e:this._expression=e.minus(i)}return e.Compare=function(t,e){return t.id()-e.id()},e.prototype.id=function(){return this._id},e.prototype.expression=function(){return this._expression},e.prototype.op=function(){return this._operator},e.prototype.strength=function(){return this._strength},e}());t.Constraint=e;var r=0}(r||(r={}));var r;!function(e){function r(e){return new t.AssociativeArray(e)}e.createMap=r}(r||(r={}));var r;!function(t){var e=function(){function e(t){void 0===t&&(t=""),this._value=0,this._context=null,this._id=r++,this._name=t}return e.Compare=function(t,e){return t.id()-e.id()},e.prototype.id=function(){return this._id},e.prototype.name=function(){return this._name},e.prototype.setName=function(t){this._name=t},e.prototype.context=function(){return this._context},e.prototype.setContext=function(t){this._context=t},e.prototype.value=function(){return this._value},e.prototype.setValue=function(t){this._value=t},e.prototype.plus=function(e){return new t.Expression(this,e)},e.prototype.minus=function(e){return new t.Expression(this,"number"==typeof e?-e:[-1,e])},e.prototype.multiply=function(e){return new t.Expression([e,this])},e.prototype.divide=function(e){return new t.Expression([1/e,this])},e.prototype.toJSON=function(){return{name:this._name,value:this._value}},e}();t.Variable=e;var r=0}(r||(r={}));var r;!function(t){function e(e){for(var n=0,i=function(){return 0},a=t.createMap(t.Variable.Compare),o=0,s=e.length;s>o;++o){var u=e[o];if("number"==typeof u)n+=u;else if(u instanceof t.Variable)a.setDefault(u,i).second+=1;else if(u instanceof r){n+=u.constant();for(var c=u.terms(),l=0,f=c.size();f>l;l++){var p=c.itemAt(l);a.setDefault(p.first,i).second+=p.second}}else{if(!(u instanceof Array))throw new Error("invalid Expression argument: "+u);if(2!==u.length)throw new Error("array must have length 2");var h=u[0],d=u[1];if("number"!=typeof h)throw new Error("array item 0 must be a number");if(d instanceof t.Variable)a.setDefault(d,i).second+=h;else{if(!(d instanceof r))throw new Error("array item 1 must be a variable or expression");n+=d.constant()*h;for(var c=d.terms(),l=0,f=c.size();f>l;l++){var p=c.itemAt(l);a.setDefault(p.first,i).second+=p.second*h}}}}return{terms:a,constant:n}}var r=function(){function t(){var t=e(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,r=this._terms.size();r>e;e++){var n=this._terms.itemAt(e);t+=n.first.value()*n.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,"number"==typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t}();t.Expression=r}(r||(r={}));var r;!function(t){var e;!function(t){function e(t,e,r,n){void 0===n&&(n=1);var i=0;return i+=1e6*Math.max(0,Math.min(1e3,t*n)),i+=1e3*Math.max(0,Math.min(1e3,e*n)),i+=Math.max(0,Math.min(1e3,r*n))}function r(e){return Math.max(0,Math.min(t.required,e))}t.create=e,t.required=e(1e3,1e3,1e3),t.strong=e(1,0,0),t.medium=e(0,1,0),t.weak=e(0,0,1),t.clip=r}(e=t.Strength||(t.Strength={}))}(r||(r={}));var r;return function(t){function e(t){var e=1e-8;return 0>t?e>-t:e>t}function r(){return t.createMap(t.Constraint.Compare)}function n(){return t.createMap(u.Compare)}function i(){return t.createMap(t.Variable.Compare)}function a(){return t.createMap(t.Variable.Compare)}var o=function(){function o(){this._cnMap=r(),this._rowMap=n(),this._varMap=i(),this._editMap=a(),this._infeasibleRows=[],this._objective=new l,this._artificial=null,this._idTick=0}return o.prototype.createConstraint=function(e,r,n,i){void 0===i&&(i=t.Strength.required);var a=new t.Constraint(e,r,n,i);return this.addConstraint(a),a},o.prototype.addConstraint=function(t){var r=this._cnMap.find(t);if(void 0!==r)throw new Error("duplicate constraint");var n=this._createRow(t),i=n.row,a=n.tag,o=this._chooseSubject(i,a);if(0===o.type()&&i.allDummies()){if(!e(i.constant()))throw new Error("unsatisfiable constraint");o=a.marker}if(0===o.type()){if(!this._addWithArtificialVariable(i))throw new Error("unsatisfiable constraint")}else i.solveFor(o),this._substitute(o,i),this._rowMap.insert(o,i);this._cnMap.insert(t,a),this._optimize(this._objective)},o.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error("unknown constraint");this._removeConstraintEffects(t,e.second);var r=e.second.marker,n=this._rowMap.erase(r);if(void 0===n){var i=this._getMarkerLeavingSymbol(r);if(0===i.type())throw new Error("failed to find leaving row");n=this._rowMap.erase(i),n.second.solveForEx(i,r),this._substitute(r,n.second)}this._optimize(this._objective)},o.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},o.prototype.addEditVariable=function(e,r){var n=this._editMap.find(e);if(void 0!==n)throw new Error("duplicate edit variable");if(r=t.Strength.clip(r),r===t.Strength.required)throw new Error("bad required strength");var i=new t.Expression(e),a=new t.Constraint(i,2,void 0,r);this.addConstraint(a);var o=this._cnMap.find(a).second,s={tag:o,constraint:a,constant:0};this._editMap.insert(e,s)},o.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error("unknown edit variable");this.removeConstraint(e.second.constraint)},o.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},o.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error("unknown edit variable");var n=this._rowMap,i=r.second,a=e-i.constant;i.constant=e;var o=i.tag.marker,s=n.find(o);if(void 0!==s)return s.second.add(-a)<0&&this._infeasibleRows.push(o),void this._dualOptimize();var u=i.tag.other,s=n.find(u);if(void 0!==s)return s.second.add(a)<0&&this._infeasibleRows.push(u),void this._dualOptimize();for(var c=0,l=n.size();l>c;++c){var s=n.itemAt(c),f=s.second,p=f.coefficientFor(o);0!==p&&f.add(a*p)<0&&1!==s.first.type()&&this._infeasibleRows.push(s.first)}this._dualOptimize()},o.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,n=t.size();n>r;++r){var i=t.itemAt(r),a=e.find(i.second);void 0!==a?i.first.setValue(a.second.constant()):i.first.setValue(0)}},o.prototype._getVarSymbol=function(t){var e=this,r=function(){return e._makeSymbol(1)};return this._varMap.setDefault(t,r).second},o.prototype._createRow=function(r){for(var n=r.expression(),i=new l(n.constant()),a=n.terms(),o=0,s=a.size();s>o;++o){var u=a.itemAt(o);if(!e(u.second)){var f=this._getVarSymbol(u.first),p=this._rowMap.find(f);void 0!==p?i.insertRow(p.second,u.second):i.insertSymbol(f,u.second)}}var h=this._objective,d=r.strength(),v={marker:c,other:c};switch(r.op()){case 0:case 1:var y=0===r.op()?1:-1,_=this._makeSymbol(2);if(v.marker=_,i.insertSymbol(_,y),d<t.Strength.required){var g=this._makeSymbol(3);v.other=g,i.insertSymbol(g,-y),h.insertSymbol(g,d)}break;case 2:if(d<t.Strength.required){var w=this._makeSymbol(3),A=this._makeSymbol(3);v.marker=w,v.other=A,i.insertSymbol(w,-1),i.insertSymbol(A,1),h.insertSymbol(w,d),h.insertSymbol(A,d)}else{var m=this._makeSymbol(4);v.marker=m,i.insertSymbol(m)}}return i.constant()<0&&i.reverseSign(),{row:i,tag:v}},o.prototype._chooseSubject=function(t,e){for(var r=t.cells(),n=0,i=r.size();i>n;++n){var a=r.itemAt(n);if(1===a.first.type())return a.first}var o=e.marker.type();return(2===o||3===o)&&t.coefficientFor(e.marker)<0?e.marker:(o=e.other.type(),(2===o||3===o)&&t.coefficientFor(e.other)<0?e.other:c)},o.prototype._addWithArtificialVariable=function(t){var r=this._makeSymbol(2);this._rowMap.insert(r,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var n=e(this._artificial.constant());this._artificial=null;var i=this._rowMap.erase(r);if(void 0!==i){var a=i.second;if(a.isConstant())return n;var o=this._anyPivotableSymbol(a);if(0===o.type())return!1;a.solveForEx(r,o),this._substitute(o,a),this._rowMap.insert(o,a)}for(var s=this._rowMap,u=0,c=s.size();c>u;++u)s.itemAt(u).second.removeSymbol(r);return this._objective.removeSymbol(r),n},o.prototype._substitute=function(t,e){for(var r=this._rowMap,n=0,i=r.size();i>n;++n){var a=r.itemAt(n);a.second.substitute(t,e),a.second.constant()<0&&1!==a.first.type()&&this._infeasibleRows.push(a.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},o.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(0===e.type())return;var r=this._getLeavingSymbol(e);if(0===r.type())throw new Error("the objective is unbounded");var n=this._rowMap.erase(r).second;n.solveForEx(r,e),this._substitute(e,n),this._rowMap.insert(e,n)}},o.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),n=t.find(r);if(void 0!==n&&n.second.constant()<0){var i=this._getDualEnteringSymbol(n.second);if(0===i.type())throw new Error("dual optimize failed");var a=n.second;t.erase(r),a.solveForEx(r,i),this._substitute(i,a),t.insert(i,a)}}},o.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();n>r;++r){var i=e.itemAt(r),a=i.first;if(i.second<0&&4!==a.type())return a}return c},o.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=c,n=t.cells(),i=0,a=n.size();a>i;++i){var o=n.itemAt(i),s=o.first,u=o.second;if(u>0&&4!==s.type()){var l=this._objective.coefficientFor(s),f=l/u;e>f&&(e=f,r=s)}}return r},o.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=c,n=this._rowMap,i=0,a=n.size();a>i;++i){var o=n.itemAt(i),s=o.first;if(1!==s.type()){var u=o.second,l=u.coefficientFor(t);if(0>l){var f=-u.constant()/l;e>f&&(e=f,r=s)}}}return r},o.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,n=e,i=c,a=i,o=i,s=i,u=this._rowMap,l=0,f=u.size();f>l;++l){var p=u.itemAt(l),h=p.second,d=h.coefficientFor(t);if(0!==d){var v=p.first;if(1===v.type())s=v;else if(0>d){var y=-h.constant()/d;r>y&&(r=y,a=v)}else{var y=h.constant()/d;n>y&&(n=y,o=v)}}}return a!==i?a:o!==i?o:s},o.prototype._removeConstraintEffects=function(t,e){3===e.marker.type()&&this._removeMarkerEffects(e.marker,t.strength()),3===e.other.type()&&this._removeMarkerEffects(e.other,t.strength())},o.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},o.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();n>r;++r){var i=e.itemAt(r),a=i.first.type();if(2===a||3===a)return i.first}return c},o.prototype._makeSymbol=function(t){return new u(t,this._idTick++)},o}();t.Solver=o;var s;!function(t){t[t.Invalid=0]="Invalid",t[t.External=1]="External",t[t.Slack=2]="Slack",t[t.Error=3]="Error",t[t.Dummy=4]="Dummy"}(s||(s={}));var u=function(){function t(t,e){this._id=e,this._type=t}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),c=new u(0,-1),l=function(){function r(e){void 0===e&&(e=0),this._cellMap=t.createMap(u.Compare),this._constant=e}return r.prototype.cells=function(){return this._cellMap},r.prototype.constant=function(){return this._constant},r.prototype.isConstant=function(){return this._cellMap.empty()},r.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();r>e;++e){var n=t.itemAt(e);if(4!==n.first.type())return!1}return!0},r.prototype.copy=function(){var t=new r(this._constant);return t._cellMap=this._cellMap.copy(),t},r.prototype.add=function(t){return this._constant+=t},r.prototype.insertSymbol=function(t,r){void 0===r&&(r=1);var n=this._cellMap.setDefault(t,function(){return 0});e(n.second+=r)&&this._cellMap.erase(t)},r.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,n=0,i=r.size();i>n;++n){var a=r.itemAt(n);this.insertSymbol(a.first,a.second*e)}},r.prototype.removeSymbol=function(t){this._cellMap.erase(t)},r.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();r>e;++e){var n=t.itemAt(e);n.second=-n.second}},r.prototype.solveFor=function(t){var e=this._cellMap,r=e.erase(t),n=-1/r.second;this._constant*=n;for(var i=0,a=e.size();a>i;++i)e.itemAt(i).second*=n},r.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},r.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},r.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},r}()}(r||(r={})),r})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(8),s=n(o),u=r(1),c=n(u),l=function(){function t(e){i(this,t),this._name=e.name,this._type=e.type,this._solver=e.solver,this._attr={},e.name||(this._attr[c["default"].LEFT]=new s["default"].Variable,this._solver.addConstraint(new s["default"].Constraint(this._attr[c["default"].LEFT],s["default"].Operator.Eq,0)),this._attr[c["default"].TOP]=new s["default"].Variable,this._solver.addConstraint(new s["default"].Constraint(this._attr[c["default"].TOP],s["default"].Operator.Eq,0)),this._attr[c["default"].ZINDEX]=new s["default"].Variable,this._solver.addConstraint(new s["default"].Constraint(this._attr[c["default"].ZINDEX],s["default"].Operator.Eq,0)))}return a(t,[{key:"toJSON",value:function(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"getValue",value:function(t){return this._attr[t]?this._attr[t].value():void 0}},{key:"_getAttr",value:function(t){if(this._attr[t])return this._attr[t];switch(this._attr[t]=new s["default"].Variable,t){case c["default"].RIGHT:this._getAttr(c["default"].LEFT),this._getAttr(c["default"].WIDTH),this._solver.addConstraint(new s["default"].Constraint(this._attr[t],s["default"].Operator.Eq,this._attr[c["default"].LEFT].plus(this._attr[c["default"].WIDTH])));break;case c["default"].BOTTOM:this._getAttr(c["default"].TOP),this._getAttr(c["default"].HEIGHT),this._solver.addConstraint(new s["default"].Constraint(this._attr[t],s["default"].Operator.Eq,this._attr[c["default"].TOP].plus(this._attr[c["default"].HEIGHT])));break;case c["default"].CENTERX:this._getAttr(c["default"].LEFT),this._getAttr(c["default"].WIDTH),this._solver.addConstraint(new s["default"].Constraint(this._attr[t],s["default"].Operator.Eq,this._attr[c["default"].LEFT].plus(this._attr[c["default"].WIDTH].divide(2))));break;case c["default"].CENTERY:this._getAttr(c["default"].TOP),this._getAttr(c["default"].HEIGHT),this._solver.addConstraint(new s["default"].Constraint(this._attr[t],s["default"].Operator.Eq,this._attr[c["default"].TOP].plus(this._attr[c["default"].HEIGHT].divide(2))))}return this._solver.updateVariables(),this._attr[t]}},{key:"_getAttrValue",value:function(t){return this._getAttr(t).value()}},{key:"name",get:function(){return this._name}},{key:"left",get:function(){return this._getAttrValue(c["default"].LEFT)}},{key:"right",get:function(){return this._getAttrValue(c["default"].RIGHT)}},{key:"width",get:function(){return this._getAttrValue(c["default"].WIDTH)}},{key:"height",get:function(){return this._getAttrValue(c["default"].HEIGHT)}},{key:"intrinsicWidth",get:function(){return this._intrinsicWidth},set:function(t){if(void 0!==t&&t!==this._intrinsicWidth){var e=this._getAttr(c["default"].WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVariable(e,s["default"].Strength.create(this._name?998:999,1e3,1e3)),this._intrinsicWidth=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}},{key:"intrinsicHeight",get:function(){return this._intrinsicHeight},set:function(t){if(void 0!==t&&t!==this._intrinsicHeight){var e=this._getAttr(c["default"].HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVariable(e,s["default"].Strength.create(this._name?998:999,1e3,1e3)),this._intrinsicHeight=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}},{key:"top",get:function(){return this._getAttrValue(c["default"].TOP);
}},{key:"bottom",get:function(){return this._getAttrValue(c["default"].BOTTOM)}},{key:"centerX",get:function(){return this._getAttrValue(c["default"].CENTERX)}},{key:"centerY",get:function(){return this._getAttrValue(c["default"].CENTERY)}},{key:"zIndex",get:function(){return this._getAttrValue(c["default"].ZINDEX)}},{key:"type",get:function(){return this._type}}]),t}();e["default"]=l}])});
//# sourceMappingURL=autolayout.kiwi.min.js.map