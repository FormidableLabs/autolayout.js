!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.autolayout=e():t.autolayout=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),a=n(i),o=r(2),u=n(o),s=r(3),c=n(s),l=r(4),f=n(l),p=r(7),h=n(p),d=r(16),v=n(d),y={Attribute:a["default"],Relation:u["default"],Priority:c["default"],VisualFormat:f["default"],View:h["default"],SubView:v["default"]};e["default"]=y},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={CONST:"const",NOTANATTRIBUTE:"const",VARIABLE:"var",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",WIDTH:"width",HEIGHT:"height",CENTERX:"centerX",CENTERY:"centerY",ZINDEX:"zIndex"};e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={LEQ:"leq",EQU:"equ",GEQ:"geq"};e["default"]=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={REQUIRED:1e3,DEFAULTHIGH:750,DEFAULTLOW:250};e["default"]=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){t.equalSpacerIndex=t.equalSpacerIndex||1;var r="_~"+t.lineIndex+":"+t.equalSpacerIndex+"~";t.equalSpacerIndex>1&&t.constraints.push({view1:"_~"+t.lineIndex+":1~",attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:r,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority}),t.equalSpacerIndex++,t.relation.view||t.relation.multiplier&&1!==t.relation.multiplier?(t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:t.relation.view,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0):t.relation.constant&&(t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:g["default"].EQU,view2:null,attr2:y["default"].CONST,priority:t.relation.priority,constant:t.relation.constant}),t.relation.constant=void 0);for(var n=0;n<t.prevViews.length;n++){var i=t.prevViews[n];switch(t.orientation){case b.HORIZONTAL:t.prevAttr=i!==e?y["default"].RIGHT:y["default"].LEFT,t.curAttr=y["default"].LEFT;break;case b.VERTICAL:t.prevAttr=i!==e?y["default"].BOTTOM:y["default"].TOP,t.curAttr=y["default"].TOP;break;case b.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=i!==e?"default":0}t.constraints.push({view1:i,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function o(t,e){t.proportionalSpacerIndex=t.proportionalSpacerIndex||1;var r="_-"+t.lineIndex+":"+t.proportionalSpacerIndex+"-";t.proportionalSpacerIndex++,t.constraints.push({view1:r,attr1:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,relation:t.relation.relation||g["default"].EQU,view2:t.relation.view,attr2:t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,priority:t.relation.priority,multiplier:t.relation.multiplier}),t.relation.multiplier=void 0;for(var n=0;n<t.prevViews.length;n++){var i=t.prevViews[n];switch(t.orientation){case b.HORIZONTAL:t.prevAttr=i!==e?y["default"].RIGHT:y["default"].LEFT,t.curAttr=y["default"].LEFT;break;case b.VERTICAL:t.prevAttr=i!==e?y["default"].BOTTOM:y["default"].TOP,t.curAttr=y["default"].TOP;break;case b.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=i!==e?"default":0}t.constraints.push({view1:i,attr1:t.prevAttr,relation:t.relation.relation,view2:r,attr2:t.curAttr,priority:t.relation.priority})}t.prevViews=[r]}function u(t,e,r){for(var n=void 0,i=1;4>=i;i*=2)if(r.orientations&i&&r.stack.orientation!==i&&!(r.stack.processedOrientations&i)){r.stack.processedOrientations=r.stack.processedOrientations|i,n=n||{name:e,type:"stack"};for(var a=0,o=r.stack.subViews.length;o>a;a++)i===b.ZINDEX?t.constraints.push({view1:n,attr1:y["default"].ZINDEX,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:y["default"].ZINDEX}):(t.constraints.push({view1:n,attr1:i===b.VERTICAL?y["default"].HEIGHT:y["default"].WIDTH,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:i===b.VERTICAL?y["default"].HEIGHT:y["default"].WIDTH}),t.constraints.push({view1:n,attr1:i===b.VERTICAL?y["default"].TOP:y["default"].LEFT,relation:g["default"].EQU,view2:r.stack.subViews[a],attr2:i===b.VERTICAL?y["default"].TOP:y["default"].LEFT}))}}function s(t,e){if(e===!0&&(e=t.match(/\.\.\d+$/),e&&(t=t.substring(0,t.length-e[0].length),e=parseInt(e[0].substring(2)))),!e)return[t];var r,n=t.match(/\d+$/),i=[];if(n)for(t=t.substring(0,t.length-n[0].length),r=parseInt(n);e>=r;r++)i.push(t+r);else for(i.push(t),r=2;e>=r;r++)i.push(t+r);return i}function c(t,e,r){var n=r?r.view:null,i=[],l=[],f=void 0;n&&(e.push({view:n}),l.push(n));for(var p=0;p<e.length;p++){var h=e[p];if(!Array.isArray(h)&&h.hasOwnProperty("view")||Array.isArray(h)&&h[0].view&&!h[0].relation)for(var d=Array.isArray(h)?h:[h],v=0;v<d.length;v++){h=d[v];for(var _=","===h?[]:h.view?s(h.view,h.range):[null],g=0;g<_.length;g++){var w=_[g];if(l.push(w),w!==n&&(i.push(w),f=t.subViews[w],f||(f={orientations:0},t.subViews[w]=f),f.orientations=f.orientations|t.orientation,f.stack&&u(t,w,f)),void 0!==t.prevViews&&void 0!==w&&t.relation&&"none"!==t.relation.relation)for(var m=0;m<t.prevViews.length;m++){var A=t.prevViews[m];switch(t.orientation){case b.HORIZONTAL:t.prevAttr=A!==n?y["default"].RIGHT:y["default"].LEFT,t.curAttr=w!==n?y["default"].LEFT:y["default"].RIGHT;break;case b.VERTICAL:t.prevAttr=A!==n?y["default"].BOTTOM:y["default"].TOP,t.curAttr=w!==n?y["default"].TOP:y["default"].BOTTOM;break;case b.ZINDEX:t.prevAttr=y["default"].ZINDEX,t.curAttr=y["default"].ZINDEX,t.relation.constant=A?t.relation.constant||"default":0}t.constraints.push({view1:A,attr1:t.prevAttr,relation:t.relation.relation,view2:w,attr2:t.curAttr,multiplier:t.relation.multiplier,constant:"default"!==t.relation.constant&&t.relation.constant?-t.relation.constant:t.relation.constant,priority:t.relation.priority})}var E=h.constraints;if(E)for(var C=0;C<E.length;C++)t.prevAttr=t.horizontal?y["default"].WIDTH:y["default"].HEIGHT,t.curAttr=E[C].view||E[C].multiplier?E[C].attribute||t.prevAttr:E[C].variable?y["default"].VARIABLE:y["default"].CONST,t.constraints.push({view1:w,attr1:t.prevAttr,relation:E[C].relation,view2:E[C].view,attr2:t.curAttr,multiplier:E[C].multiplier,constant:E[C].constant,priority:E[C].priority});h.cascade&&c(t,h.cascade,h)}}else","!==h&&(t.prevViews=l,l=[],t.relation=h[0],void 0!==t.prevViews&&(t.relation.equalSpacing&&a(t,n),t.relation.multiplier&&o(t,n)))}if(n){if(f=t.subViews[n]){if(f.stack){var x=new Error('A stack named "'+n+'" has already been created');throw x.column=r.$parserOffset+1,x}}else f={orientations:t.orientation},t.subViews[n]=f;f.stack={orientation:t.orientation,processedOrientations:t.orientation,subViews:i},u(t,n,f)}}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),f=r(5),p=n(f),h=r(6),d=n(h),v=r(1),y=n(v),_=r(2),g=n(_),b={HORIZONTAL:1,VERTICAL:2,ZINDEX:4},w=["viewport","spacing","colors","shapes","widths","heights"],m=function(){function t(){i(this,t)}return l(t,null,[{key:"parseLine",value:function(t,e){if(0===t.length||e&&e.extended&&0===t.indexOf("//"))return[];var r=e&&e.extended?d["default"].parse(t):p["default"].parse(t);if(e&&"raw"===e.outFormat)return[r];var n={constraints:[],lineIndex:(e?e.lineIndex:void 0)||1,subViews:(e?e.subViews:void 0)||{}};if("attribute"===r.type)for(var i=0;i<r.predicates.length;i++)n.constraints.push({view1:r.view,attr1:r.attr,relation:r.predicates[i].relation,view2:r.predicates[i].view,attr2:r.predicates[i].attribute,multiplier:r.predicates[i].multiplier,constant:r.predicates[i].constant,priority:r.predicates[i].priority});else switch(r.orientation){case"horizontal":n.orientation=b.HORIZONTAL,n.horizontal=!0,c(n,r.cascade,null);break;case"vertical":n.orientation=b.VERTICAL,c(n,r.cascade,null);break;case"horzvert":n.orientation=b.HORIZONTAL,n.horizontal=!0,c(n,r.cascade,null),n={constraints:n.constraints,lineIndex:n.lineIndex,subViews:n.subViews,orientation:b.VERTICAL},c(n,r.cascade,null);break;case"zIndex":n.orientation=b.ZINDEX,c(n,r.cascade,null)}return n.constraints}},{key:"parse",value:function(t,e){var r=e&&e.lineSeperator?e.lineSeperator:"\n";if(!Array.isArray(t)&&t.indexOf(r)<0)try{return this.parseLine(t,e)}catch(n){throw n.source=t,n}t=Array.isArray(t)?t:[t];var i=void 0,a=[],o=0,u=void 0,s={lineIndex:o,extended:e&&e.extended,strict:e&&void 0!==e.strict?e.strict:!0,outFormat:e?e.outFormat:void 0,subViews:{}};try{for(var c=0;c<t.length;c++){i=t[c].split(r);for(var l=0;l<i.length;l++)u=i[l],o++,s.lineIndex=o,s.strict||(u=u.trim()),(s.strict||u.length)&&(a=a.concat(this.parseLine(u,s)))}}catch(n){throw n.source=u,n.line=o,n}return a}},{key:"parseMetaInfo",value:function(t,e){var r=e&&e.lineSeperator?e.lineSeperator:"\n",n=e?e.prefix:void 0;t=Array.isArray(t)?t:[t];for(var i,a={},o=0;o<t.length;o++)for(var u=t[o].split(r),c=0;c<u.length;c++)for(var l=u[c],f=0;f<w.length;f++)for(var p=0;(n?2:1)>p;p++){var h=w[f],d=(0===p?"":n)+h;if(0===l.indexOf("//"+d+" "))for(var v=l.substring(3+d.length).split(" "),y=0;y<v.length;y++){a[h]=a[h]||{};for(var _=v[y].split(":"),g=s(_[0],!0),b=0;b<g.length;b++)a[h][g[b]]=_.length>1?_[1]:""}else 0===l.indexOf("//"+d+":")&&(a[h]=l.substring(3+d.length))}if(a.viewport){var m=a.viewport,A=m["aspect-ratio"];A&&(A=A.split("/"),m["aspect-ratio"]=parseInt(A[0])/parseInt(A[1])),void 0!==m.height&&(m.height="intrinsic"===m.height?!0:parseInt(m.height)),void 0!==m.width&&(m.width="intrinsic"===m.width?!0:parseInt(m.width)),void 0!==m["max-height"]&&(m["max-height"]=parseInt(m["max-height"])),void 0!==m["max-width"]&&(m["max-width"]=parseInt(m["max-width"])),void 0!==m["min-height"]&&(m["min-height"]=parseInt(m["min-height"])),void 0!==m["min-width"]&&(m["min-width"]=parseInt(m["min-width"]))}if(a.widths)for(i in a.widths){var E="intrinsic"===a.widths[i]?!0:parseInt(a.widths[i]);a.widths[i]=E,(void 0===E||isNaN(E))&&delete a.widths[i]}if(a.heights)for(i in a.heights){var C="intrinsic"===a.heights[i]?!0:parseInt(a.heights[i]);a.heights[i]=C,(void 0===C||isNaN(C))&&delete a.heights[i]}if(a.spacing){var x=JSON.parse(a.spacing);if(a.spacing=x,Array.isArray(x)){for(var O=0,V=x.length;V>O;O++)if(isNaN(x[O])){delete a.spacing;break}}else(void 0===x||isNaN(x))&&delete a.spacing}return a}}]),t}();e["default"]=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,i,a){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=i,this.column=a,this.name="SyntaxError"}function r(t){function r(){return kt}function n(e){function r(e,r,n){var i,a;for(i=r;n>i;i++)a=t.charAt(i),"\n"===a?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return jt!==e&&(jt>e&&(jt=0,Mt={line:1,column:1,seenCR:!1}),r(Mt,jt,e),jt=e),Mt}function i(t){Ht>St||(St>Ht&&(Ht=St,Ft=[]),Ft.push(t))}function a(r,i,a){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function u(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,a,o=new Array(t.length);for(a=0;a<t.length;a++)o[a]=t[a].description;return n=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}var s=n(a),c=a<t.length?t.charAt(a):null;return null!==i&&o(i),new e(null!==r?r:u(i,c),i,c,a,s.line,s.column)}function o(){var e,r,n,a,o,f,p,h;if(e=St,r=St,n=u(),n!==C?(58===t.charCodeAt(St)?(a=T,St++):(a=C,0===Rt&&i(S)),a!==C?(n=[n,a],r=n):(St=r,r=V)):(St=r,r=V),r===C&&(r=I),r!==C)if(n=St,a=s(),a!==C?(o=l(),o!==C?(a=[a,o],n=a):(St=n,n=V)):(St=n,n=V),n===C&&(n=I),n!==C)if(a=c(),a!==C){for(o=[],f=St,p=l(),p!==C?(h=c(),h!==C?(p=[p,h],f=p):(St=f,f=V)):(St=f,f=V);f!==C;)o.push(f),f=St,p=l(),p!==C?(h=c(),h!==C?(p=[p,h],f=p):(St=f,f=V)):(St=f,f=V);o!==C?(f=St,p=l(),p!==C?(h=s(),h!==C?(p=[p,h],f=p):(St=f,f=V)):(St=f,f=V),f===C&&(f=I),f!==C?(kt=e,r=k(r,n,a,o,f),e=r):(St=e,e=V)):(St=e,e=V)}else St=e,e=V;else St=e,e=V;else St=e,e=V;return e}function u(){var e,r;return e=St,72===t.charCodeAt(St)?(r=j,St++):(r=C,0===Rt&&i(M)),r===C&&(86===t.charCodeAt(St)?(r=H,St++):(r=C,0===Rt&&i(F))),r!==C&&(kt=e,r=R(r)),e=r}function s(){var e,r;return e=St,124===t.charCodeAt(St)?(r=z,St++):(r=C,0===Rt&&i(L)),r!==C&&(kt=e,r=D()),e=r}function c(){var e,r,n,a,o;return e=St,91===t.charCodeAt(St)?(r=N,St++):(r=C,0===Rt&&i(P)),r!==C?(n=b(),n!==C?(a=h(),a===C&&(a=I),a!==C?(93===t.charCodeAt(St)?(o=q,St++):(o=C,0===Rt&&i(Z)),o!==C?(kt=e,r=G(n,a),e=r):(St=e,e=V)):(St=e,e=V)):(St=e,e=V)):(St=e,e=V),e}function l(){var e,r,n,a;return e=St,45===t.charCodeAt(St)?(r=X,St++):(r=C,0===Rt&&i(W)),r!==C?(n=f(),n!==C?(45===t.charCodeAt(St)?(a=X,St++):(a=C,0===Rt&&i(W)),a!==C?(kt=e,r=$(n),e=r):(St=e,e=V)):(St=e,e=V)):(St=e,e=V),e===C&&(e=St,45===t.charCodeAt(St)?(r=X,St++):(r=C,0===Rt&&i(W)),r!==C&&(kt=e,r=U()),e=r,e===C&&(e=St,r=B,r!==C&&(kt=e,r=Q()),e=r)),e}function f(){var t;return t=p(),t===C&&(t=h()),t}function p(){var t,e;return t=St,e=w(),e!==C&&(kt=t,e=Y(e)),t=e}function h(){var e,r,n,a,o,u,s;if(e=St,40===t.charCodeAt(St)?(r=J,St++):(r=C,0===Rt&&i(K)),r!==C)if(n=d(),n!==C){for(a=[],o=St,44===t.charCodeAt(St)?(u=tt,St++):(u=C,0===Rt&&i(et)),u!==C?(s=d(),s!==C?(u=[u,s],o=u):(St=o,o=V)):(St=o,o=V);o!==C;)a.push(o),o=St,44===t.charCodeAt(St)?(u=tt,St++):(u=C,0===Rt&&i(et)),u!==C?(s=d(),s!==C?(u=[u,s],o=u):(St=o,o=V)):(St=o,o=V);a!==C?(41===t.charCodeAt(St)?(o=rt,St++):(o=C,0===Rt&&i(nt)),o!==C?(kt=e,r=it(n,a),e=r):(St=e,e=V)):(St=e,e=V)}else St=e,e=V;else St=e,e=V;return e}function d(){var e,r,n,a,o,u;return e=St,r=v(),r===C&&(r=I),r!==C?(n=y(),n!==C?(a=St,64===t.charCodeAt(St)?(o=at,St++):(o=C,0===Rt&&i(ot)),o!==C?(u=_(),u!==C?(o=[o,u],a=o):(St=a,a=V)):(St=a,a=V),a===C&&(a=I),a!==C?(kt=e,r=ut(r,n,a),e=r):(St=e,e=V)):(St=e,e=V)):(St=e,e=V),e}function v(){var e,r;return e=St,t.substr(St,2)===st?(r=st,St+=2):(r=C,0===Rt&&i(ct)),r!==C&&(kt=e,r=lt()),e=r,e===C&&(e=St,t.substr(St,2)===ft?(r=ft,St+=2):(r=C,0===Rt&&i(pt)),r!==C&&(kt=e,r=ht()),e=r,e===C&&(e=St,t.substr(St,2)===dt?(r=dt,St+=2):(r=C,0===Rt&&i(vt)),r!==C&&(kt=e,r=yt()),e=r)),e}function y(){var t;return t=g(),t===C&&(t=b()),t}function _(){var e,r,n;if(e=St,r=[],_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt));else r=V;return r!==C&&(kt=e,r=bt(r)),e=r}function g(){var t,e;return t=St,e=w(),e!==C&&(kt=t,e=wt(e)),t=e}function b(){var e,r,n,a,o;if(e=St,r=St,n=[],mt.test(t.charAt(St))?(a=t.charAt(St),St++):(a=C,0===Rt&&i(At)),a!==C)for(;a!==C;)n.push(a),mt.test(t.charAt(St))?(a=t.charAt(St),St++):(a=C,0===Rt&&i(At));else n=V;if(n!==C&&(n=t.substring(r,St)),r=n,r!==C){for(n=St,a=[],Et.test(t.charAt(St))?(o=t.charAt(St),St++):(o=C,0===Rt&&i(Ct));o!==C;)a.push(o),Et.test(t.charAt(St))?(o=t.charAt(St),St++):(o=C,0===Rt&&i(Ct));a!==C&&(a=t.substring(n,St)),n=a,n!==C?(kt=e,r=xt(r,n),e=r):(St=e,e=V)}else St=e,e=V;return e}function w(){var e,r,n,a,o;if(e=St,r=[],_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt));else r=V;if(r!==C)if(46===t.charCodeAt(St)?(n=Ot,St++):(n=C,0===Rt&&i(Vt)),n!==C){if(a=[],_t.test(t.charAt(St))?(o=t.charAt(St),St++):(o=C,0===Rt&&i(gt)),o!==C)for(;o!==C;)a.push(o),_t.test(t.charAt(St))?(o=t.charAt(St),St++):(o=C,0===Rt&&i(gt));else a=V;a!==C?(kt=e,r=It(r,a),e=r):(St=e,e=V)}else St=e,e=V;else St=e,e=V;if(e===C){if(e=St,r=[],_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt)),n!==C)for(;n!==C;)r.push(n),_t.test(t.charAt(St))?(n=t.charAt(St),St++):(n=C,0===Rt&&i(gt));else r=V;r!==C&&(kt=e,r=Tt(r)),e=r}return e}function m(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}var A,E=arguments.length>1?arguments[1]:{},C={},x={visualFormatString:o},O=o,V=C,I=null,T=":",S={type:"literal",value:":",description:'":"'},k=function(t,e,r,n,i){return{orientation:t?t[0]:"horizontal",cascade:(e||[]).concat([r],[].concat.apply([],n),i||[])}},j="H",M={type:"literal",value:"H",description:'"H"'},H="V",F={type:"literal",value:"V",description:'"V"'},R=function(t){return"H"==t?"horizontal":"vertical"},z="|",L={type:"literal",value:"|",description:'"|"'},D=function(){return{view:null}},N="[",P={type:"literal",value:"[",description:'"["'},q="]",Z={type:"literal",value:"]",description:'"]"'},G=function(t,e){return m(t,e?{constraints:e}:{})},X="-",W={type:"literal",value:"-",description:'"-"'},$=function(t){return t},U=function(){return[{relation:"equ",constant:"default",$parserOffset:r()}]},B="",Q=function(){return[{relation:"equ",constant:0,$parserOffset:r()}]},Y=function(t){return[{relation:"equ",constant:t,$parserOffset:r()}]},J="(",K={type:"literal",value:"(",description:'"("'},tt=",",et={type:"literal",value:",",description:'","'},rt=")",nt={type:"literal",value:")",description:'")"'},it=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},at="@",ot={type:"literal",value:"@",description:'"@"'},ut=function(t,e,r){return m({relation:"equ"},t||{},e,r?r[1]:{})},st="==",ct={type:"literal",value:"==",description:'"=="'},lt=function(){return{relation:"equ",$parserOffset:r()}},ft="<=",pt={type:"literal",value:"<=",description:'"<="'},ht=function(){return{relation:"leq",$parserOffset:r()}},dt=">=",vt={type:"literal",value:">=",description:'">="'},yt=function(){return{relation:"geq",$parserOffset:r()}},_t=/^[0-9]/,gt={type:"class",value:"[0-9]",description:"[0-9]"},bt=function(t){return{priority:parseInt(t.join(""),10)}},wt=function(t){return{constant:t}},mt=/^[a-zA-Z_]/,At={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},Et=/^[a-zA-Z0-9_]/,Ct={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},xt=function(t,e){return{view:t+e}},Ot=".",Vt={type:"literal",value:".",description:'"."'},It=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},Tt=function(t){return parseInt(t.join(""),10)},St=0,kt=0,jt=0,Mt={line:1,column:1,seenCR:!1},Ht=0,Ft=[],Rt=0;if("startRule"in E){if(!(E.startRule in x))throw new Error("Can't start parsing from rule \""+E.startRule+'".');O=x[E.startRule]}if(A=O(),A!==C&&St===t.length)return A;throw A!==C&&St<t.length&&i({type:"end",description:"end of input"}),a(null,Ft,Ht)}return t(e,Error),{SyntaxError:e,parse:r}}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,e,r,n,i,a){this.message=t,this.expected=e,this.found=r,this.offset=n,this.line=i,this.column=a,this.name="SyntaxError"}function r(t){function r(){return gr}function n(e){function r(e,r,n){var i,a;for(i=r;n>i;i++)a=t.charAt(i),"\n"===a?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}return br!==e&&(br>e&&(br=0,wr={line:1,column:1,seenCR:!1}),r(wr,br,e),br=e),wr}function i(t){mr>_r||(_r>mr&&(mr=_r,Ar=[]),Ar.push(t))}function a(r,i,a){function o(t){var e=1;for(t.sort(function(t,e){return t.description<e.description?-1:t.description>e.description?1:0});e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}function u(t,e){function r(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(t){return"\\x0"+e(t)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(t){return"\\x"+e(t)}).replace(/[\u0180-\u0FFF]/g,function(t){return"\\u0"+e(t)}).replace(/[\u1080-\uFFFF]/g,function(t){return"\\u"+e(t)})}var n,i,a,o=new Array(t.length);for(a=0;a<t.length;a++)o[a]=t[a].description;return n=t.length>1?o.slice(0,-1).join(", ")+" or "+o[t.length-1]:o[0],i=e?'"'+r(e)+'"':"end of input","Expected "+n+" but "+i+" found."}var s=n(a),c=a<t.length?t.charAt(a):null;return null!==i&&o(i),new e(null!==r?r:u(i,c),i,c,a,s.line,s.column)}function o(){var t;return t=l(),t===N&&(t=u()),t}function u(){var t,e,r,n,i;return t=_r,e=s(),e!==N?(r=c(),r!==N?(n=g(),n!==N?(i=p(),i===N&&(i=G),i!==N?(gr=t,e=X(r,n,i),t=e):(_r=t,t=Z)):(_r=t,t=Z)):(_r=t,t=Z)):(_r=t,t=Z),t}function s(){var e,r;return e=_r,t.substr(_r,2)===W?(r=W,_r+=2):(r=N,0===Er&&i($)),r!==N&&(gr=e,r=U()),e=r}function c(){var t,e,r;return t=_r,e=H(),e!==N?(r=S(),r!==N?(gr=t,e=B(e,r),t=e):(_r=t,t=Z)):(_r=t,t=Z),t}function l(){var e,r,n,a,o,u,s,c;if(e=_r,r=_r,n=f(),n!==N?(58===t.charCodeAt(_r)?(a=Q,_r++):(a=N,0===Er&&i(Y)),a!==N?(n=[n,a],r=n):(_r=r,r=Z)):(_r=r,r=Z),r===N&&(r=G),r!==N)if(n=_r,a=h(),a!==N?(o=_(),o!==N?(a=[a,o],n=a):(_r=n,n=Z)):(_r=n,n=Z),n===N&&(n=G),n!==N)if(a=d(),a!==N){for(o=[],u=_r,s=_(),s!==N?(c=d(),c!==N?(s=[s,c],u=s):(_r=u,u=Z)):(_r=u,u=Z);u!==N;)o.push(u),u=_r,s=_(),s!==N?(c=d(),c!==N?(s=[s,c],u=s):(_r=u,u=Z)):(_r=u,u=Z);o!==N?(u=_r,s=_(),s!==N?(c=h(),c!==N?(s=[s,c],u=s):(_r=u,u=Z)):(_r=u,u=Z),u===N&&(u=G),u!==N?(s=p(),s===N&&(s=G),s!==N?(gr=e,r=J(r,n,a,o,u,s),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;else _r=e,e=Z;return e}function f(){var e,r;return e=_r,t.substr(_r,2)===K?(r=K,_r+=2):(r=N,0===Er&&i(tt)),r!==N&&(gr=e,r=et()),e=r,e===N&&(e=_r,72===t.charCodeAt(_r)?(r=rt,_r++):(r=N,0===Er&&i(nt)),r!==N&&(gr=e,r=it()),e=r,e===N&&(e=_r,86===t.charCodeAt(_r)?(r=at,_r++):(r=N,0===Er&&i(ot)),r!==N&&(gr=e,r=ut()),e=r,e===N&&(e=_r,90===t.charCodeAt(_r)?(r=st,_r++):(r=N,0===Er&&i(ct)),r!==N&&(gr=e,r=lt()),e=r))),e}function p(){var e,r,n,a,o;for(e=_r,r=[],32===t.charCodeAt(_r)?(n=ft,_r++):(n=N,0===Er&&i(pt));n!==N;)r.push(n),32===t.charCodeAt(_r)?(n=ft,_r++):(n=N,0===Er&&i(pt));if(r!==N)if(t.substr(_r,2)===ht?(n=ht,_r+=2):(n=N,0===Er&&i(dt)),n!==N){for(a=[],t.length>_r?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(vt));o!==N;)a.push(o),t.length>_r?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(vt));a!==N?(r=[r,n,a],e=r):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;return e}function h(){var e,r;return e=_r,124===t.charCodeAt(_r)?(r=yt,_r++):(r=N,0===Er&&i(_t)),r!==N&&(gr=e,r=gt()),e=r}function d(){var e,r,n,a,o,u,s;if(e=_r,91===t.charCodeAt(_r)?(r=bt,_r++):(r=N,0===Er&&i(wt)),r!==N)if(n=v(),n!==N){for(a=[],o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=v(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);o!==N;)a.push(o),o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=v(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);a!==N?(93===t.charCodeAt(_r)?(o=Et,_r++):(o=N,0===Er&&i(Ct)),o!==N?(gr=e,r=xt(n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;return e}function v(){var t,e,r,n;return t=_r,e=M(),e!==N?(r=w(),r===N&&(r=G),r!==N?(n=y(),n===N&&(n=G),n!==N?(gr=t,e=Ot(e,r,n),t=e):(_r=t,t=Z)):(_r=t,t=Z)):(_r=t,t=Z),t}function y(){var e,r,n,a,o,u;if(e=_r,58===t.charCodeAt(_r)?(r=Q,_r++):(r=N,0===Er&&i(Y)),r!==N){if(n=[],a=_r,o=_(),o!==N?(u=d(),u!==N?(o=[o,u],a=o):(_r=a,a=Z)):(_r=a,a=Z),a!==N)for(;a!==N;)n.push(a),a=_r,o=_(),o!==N?(u=d(),u!==N?(o=[o,u],a=o):(_r=a,a=Z)):(_r=a,a=Z);else n=Z;n!==N?(a=_(),a!==N?(gr=e,r=Vt(n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;return e}function _(){var e,r,n,a;return e=_r,t.substr(_r,2)===It?(r=It,_r+=2):(r=N,0===Er&&i(Tt)),r!==N&&(gr=e,r=St()),e=r,e===N&&(e=_r,45===t.charCodeAt(_r)?(r=kt,_r++):(r=N,0===Er&&i(jt)),r!==N?(n=g(),n!==N?(45===t.charCodeAt(_r)?(a=kt,_r++):(a=N,0===Er&&i(jt)),a!==N?(gr=e,r=Mt(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,45===t.charCodeAt(_r)?(r=kt,_r++):(r=N,0===Er&&i(jt)),r!==N&&(gr=e,r=Ht()),e=r,e===N&&(e=_r,126===t.charCodeAt(_r)?(r=Ft,_r++):(r=N,0===Er&&i(Rt)),r!==N?(n=A(),n!==N?(126===t.charCodeAt(_r)?(a=Ft,_r++):(a=N,0===Er&&i(Rt)),a!==N?(gr=e,r=Mt(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,126===t.charCodeAt(_r)?(r=Ft,_r++):(r=N,0===Er&&i(Rt)),r!==N&&(gr=e,r=zt()),e=r,e===N&&(e=_r,r=Lt,r!==N&&(gr=e,r=Dt()),e=r))))),e}function g(){var t;return t=b(),t===N&&(t=w()),t}function b(){var t,e;return t=_r,e=I(),e!==N&&(gr=t,e=Nt(e)),t=e,t===N&&(t=_r,e=R(),e!==N&&(gr=t,e=Pt(e)),t=e),t}function w(){var e,r,n,a,o,u,s;if(e=_r,40===t.charCodeAt(_r)?(r=qt,_r++):(r=N,0===Er&&i(Zt)),r!==N)if(n=m(),n!==N){for(a=[],o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=m(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);o!==N;)a.push(o),o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=m(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);a!==N?(41===t.charCodeAt(_r)?(o=Gt,_r++):(o=N,0===Er&&i(Xt)),o!==N?(gr=e,r=Wt(n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;return e}function m(){var e,r,n,a,o,u;return e=_r,r=C(),r===N&&(r=G),r!==N?(n=x(),n!==N?(a=_r,64===t.charCodeAt(_r)?(o=$t,_r++):(o=N,0===Er&&i(Ut)),o!==N?(u=O(),u!==N?(o=[o,u],a=o):(_r=a,a=Z)):(_r=a,a=Z),a===N&&(a=G),a!==N?(gr=e,r=Bt(r,n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z),e}function A(){var e,r,n,a,o,u,s;if(e=_r,40===t.charCodeAt(_r)?(r=qt,_r++):(r=N,0===Er&&i(Zt)),r!==N)if(n=E(),n!==N){for(a=[],o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=E(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);o!==N;)a.push(o),o=_r,44===t.charCodeAt(_r)?(u=mt,_r++):(u=N,0===Er&&i(At)),u!==N?(s=E(),s!==N?(u=[u,s],o=u):(_r=o,o=Z)):(_r=o,o=Z);a!==N?(41===t.charCodeAt(_r)?(o=Gt,_r++):(o=N,0===Er&&i(Xt)),o!==N?(gr=e,r=Wt(n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;return e}function E(){var e,r,n,a,o,u;return e=_r,r=C(),r===N&&(r=G),r!==N?(n=x(),n!==N?(a=_r,64===t.charCodeAt(_r)?(o=$t,_r++):(o=N,0===Er&&i(Ut)),o!==N?(u=O(),u!==N?(o=[o,u],a=o):(_r=a,a=Z)):(_r=a,a=Z),a===N&&(a=G),a!==N?(gr=e,r=Qt(r,n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z),e}function C(){var e,r;return e=_r,t.substr(_r,2)===Yt?(r=Yt,_r+=2):(r=N,0===Er&&i(Jt)),r!==N&&(gr=e,r=Kt()),e=r,e===N&&(e=_r,t.substr(_r,2)===te?(r=te,_r+=2):(r=N,0===Er&&i(ee)),r!==N&&(gr=e,r=re()),e=r,e===N&&(e=_r,t.substr(_r,2)===ne?(r=ne,_r+=2):(r=N,0===Er&&i(ie)),r!==N&&(gr=e,r=ae()),e=r)),e}function x(){var t;return t=I(),t===N&&(t=V(),t===N&&(t=T())),t}function O(){var e,r,n;if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue)),n!==N)for(;n!==N;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue));else r=Z;return r!==N&&(gr=e,r=se(r)),e=r}function V(){var e,r,n;return e=_r,r=R(),r!==N&&(gr=e,r=ce(r)),e=r,e===N&&(e=_r,45===t.charCodeAt(_r)?(r=kt,_r++):(r=N,0===Er&&i(jt)),r!==N?(n=R(),n!==N?(gr=e,r=le(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=N,0===Er&&i(pe)),r!==N?(n=R(),n!==N?(gr=e,r=ce(n),e=r):(_r=e,e=Z)):(_r=e,e=Z))),e}function I(){var e,r,n,a;return e=_r,r=R(),r!==N?(37===t.charCodeAt(_r)?(n=he,_r++):(n=N,0===Er&&i(de)),n!==N?(gr=e,r=ve(r),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,45===t.charCodeAt(_r)?(r=kt,_r++):(r=N,0===Er&&i(jt)),r!==N?(n=R(),n!==N?(37===t.charCodeAt(_r)?(a=he,_r++):(a=N,0===Er&&i(de)),a!==N?(gr=e,r=ye(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=N,0===Er&&i(pe)),r!==N?(n=R(),n!==N?(37===t.charCodeAt(_r)?(a=he,_r++):(a=N,0===Er&&i(de)),a!==N?(gr=e,r=ve(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)):(_r=e,e=Z))),e}function T(){var t,e,r,n,i;return t=_r,e=H(),e!==N?(r=S(),r===N&&(r=G),r!==N?(n=k(),n===N&&(n=G),n!==N?(i=j(),i===N&&(i=G),i!==N?(gr=t,e=_e(e,r,n,i),t=e):(_r=t,t=Z)):(_r=t,t=Z)):(_r=t,t=Z)):(_r=t,t=Z),t}function S(){var e,r;return e=_r,t.substr(_r,5)===ge?(r=ge,_r+=5):(r=N,0===Er&&i(be)),r!==N&&(gr=e,r=we()),e=r,e===N&&(e=_r,t.substr(_r,6)===me?(r=me,_r+=6):(r=N,0===Er&&i(Ae)),r!==N&&(gr=e,r=Ee()),e=r,e===N&&(e=_r,t.substr(_r,4)===Ce?(r=Ce,_r+=4):(r=N,0===Er&&i(xe)),r!==N&&(gr=e,r=Oe()),e=r,e===N&&(e=_r,t.substr(_r,7)===Ve?(r=Ve,_r+=7):(r=N,0===Er&&i(Ie)),r!==N&&(gr=e,r=Te()),e=r,e===N&&(e=_r,t.substr(_r,6)===Se?(r=Se,_r+=6):(r=N,0===Er&&i(ke)),r!==N&&(gr=e,r=je()),e=r,e===N&&(e=_r,t.substr(_r,7)===Me?(r=Me,_r+=7):(r=N,0===Er&&i(He)),r!==N&&(gr=e,r=Fe()),e=r,e===N&&(e=_r,t.substr(_r,8)===Re?(r=Re,_r+=8):(r=N,0===Er&&i(ze)),r!==N&&(gr=e,r=Le()),e=r,e===N&&(e=_r,t.substr(_r,8)===De?(r=De,_r+=8):(r=N,0===Er&&i(Ne)),r!==N&&(gr=e,r=Pe()),e=r))))))),e}function k(){var e,r,n;return e=_r,47===t.charCodeAt(_r)?(r=qe,_r++):(r=N,0===Er&&i(Ze)),r!==N?(n=R(),n!==N?(gr=e,r=Ge(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,t.substr(_r,2)===Xe?(r=Xe,_r+=2):(r=N,0===Er&&i(We)),r!==N?(n=R(),n!==N?(gr=e,r=Ge(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,t.substr(_r,2)===$e?(r=$e,_r+=2):(r=N,0===Er&&i(Ue)),r!==N?(n=R(),n!==N?(gr=e,r=Be(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,42===t.charCodeAt(_r)?(r=Qe,_r++):(r=N,0===Er&&i(Ye)),r!==N?(n=R(),n!==N?(gr=e,r=Je(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,t.substr(_r,2)===Ke?(r=Ke,_r+=2):(r=N,0===Er&&i(tr)),r!==N?(n=R(),n!==N?(gr=e,r=Je(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,t.substr(_r,2)===er?(r=er,_r+=2):(r=N,0===Er&&i(rr)),r!==N?(n=R(),n!==N?(gr=e,r=nr(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)))))),e}function j(){var e,r,n;return e=_r,45===t.charCodeAt(_r)?(r=kt,_r++):(r=N,0===Er&&i(jt)),r!==N?(n=R(),n!==N?(gr=e,r=nr(n),e=r):(_r=e,e=Z)):(_r=e,e=Z),e===N&&(e=_r,43===t.charCodeAt(_r)?(r=fe,_r++):(r=N,0===Er&&i(pe)),r!==N?(n=R(),n!==N?(gr=e,r=Je(n),e=r):(_r=e,e=Z)):(_r=e,e=Z)),e}function M(){var e,r,n,a,o;if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar)),a!==N)for(;a!==N;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar));else n=Z;if(n!==N&&(n=t.substring(r,_r)),r=n,r!==N){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ur));o!==N;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ur));a!==N&&(a=t.substring(n,_r)),n=a,n!==N?(a=F(),a!==N?(gr=e,r=sr(r,n,a),e=r):(_r=e,e=Z)):(_r=e,e=Z)}else _r=e,e=Z;if(e===N){if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar)),a!==N)for(;a!==N;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar));else n=Z;if(n!==N&&(n=t.substring(r,_r)),r=n,r!==N){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ur));o!==N;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ur));a!==N&&(a=t.substring(n,_r)),n=a,n!==N?(gr=e,r=cr(r,n),e=r):(_r=e,e=Z)}else _r=e,e=Z}return e}function H(){var e,r,n,a,o;if(e=_r,r=_r,n=[],ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar)),a!==N)for(;a!==N;)n.push(a),ir.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ar));else n=Z;if(n!==N&&(n=t.substring(r,_r)),r=n,r!==N){for(n=_r,a=[],or.test(t.charAt(_r))?(o=t.charAt(_r),
_r++):(o=N,0===Er&&i(ur));o!==N;)a.push(o),or.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ur));a!==N&&(a=t.substring(n,_r)),n=a,n!==N?(gr=e,r=cr(r,n),e=r):(_r=e,e=Z)}else _r=e,e=Z;return e}function F(){var e,r,n,a;if(e=_r,t.substr(_r,2)===lr?(r=lr,_r+=2):(r=N,0===Er&&i(fr)),r!==N){if(n=[],oe.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ue)),a!==N)for(;a!==N;)n.push(a),oe.test(t.charAt(_r))?(a=t.charAt(_r),_r++):(a=N,0===Er&&i(ue));else n=Z;n!==N?(gr=e,r=pr(n),e=r):(_r=e,e=Z)}else _r=e,e=Z;return e}function R(){var e,r,n,a,o;if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue)),n!==N)for(;n!==N;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue));else r=Z;if(r!==N)if(46===t.charCodeAt(_r)?(n=hr,_r++):(n=N,0===Er&&i(dr)),n!==N){if(a=[],oe.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ue)),o!==N)for(;o!==N;)a.push(o),oe.test(t.charAt(_r))?(o=t.charAt(_r),_r++):(o=N,0===Er&&i(ue));else a=Z;a!==N?(gr=e,r=vr(r,a),e=r):(_r=e,e=Z)}else _r=e,e=Z;else _r=e,e=Z;if(e===N){if(e=_r,r=[],oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue)),n!==N)for(;n!==N;)r.push(n),oe.test(t.charAt(_r))?(n=t.charAt(_r),_r++):(n=N,0===Er&&i(ue));else r=Z;r!==N&&(gr=e,r=yr(r)),e=r}return e}function z(t){for(var e=1;e<arguments.length;e++)for(var r in arguments[e])t[r]=arguments[e][r];return t}var L,D=arguments.length>1?arguments[1]:{},N={},P={visualFormatStringExt:o},q=o,Z=N,G=null,X=function(t,e,r){return{type:"attribute",view:t.view,attr:t.attr,predicates:e}},W="A:",$={type:"literal",value:"A:",description:'"A:"'},U=function(){return"attribute"},B=function(t,e){return{view:t.view,attr:e}},Q=":",Y={type:"literal",value:":",description:'":"'},J=function(t,e,r,n,i,a){return{type:"vfl",orientation:t?t[0]:"horizontal",cascade:(e||[]).concat(r,[].concat.apply([],n),i||[])}},K="HV",tt={type:"literal",value:"HV",description:'"HV"'},et=function(){return"horzvert"},rt="H",nt={type:"literal",value:"H",description:'"H"'},it=function(){return"horizontal"},at="V",ot={type:"literal",value:"V",description:'"V"'},ut=function(){return"vertical"},st="Z",ct={type:"literal",value:"Z",description:'"Z"'},lt=function(){return"zIndex"},ft=" ",pt={type:"literal",value:" ",description:'" "'},ht="//",dt={type:"literal",value:"//",description:'"//"'},vt={type:"any",description:"any character"},yt="|",_t={type:"literal",value:"|",description:'"|"'},gt=function(){return{view:null}},bt="[",wt={type:"literal",value:"[",description:'"["'},mt=",",At={type:"literal",value:",",description:'","'},Et="]",Ct={type:"literal",value:"]",description:'"]"'},xt=function(t,e){return e.length?[t].concat([].concat.apply([],e)):t},Ot=function(t,e,r){return z(z(t,e?{constraints:e}:{}),r?{cascade:r}:{})},Vt=function(t,e){return[].concat([].concat.apply([],t),[e])},It="->",Tt={type:"literal",value:"->",description:'"->"'},St=function(){return[{relation:"none"}]},kt="-",jt={type:"literal",value:"-",description:'"-"'},Mt=function(t){return t},Ht=function(){return[{relation:"equ",constant:"default"}]},Ft="~",Rt={type:"literal",value:"~",description:'"~"'},zt=function(){return[{relation:"equ",equalSpacing:!0}]},Lt="",Dt=function(){return[{relation:"equ",constant:0}]},Nt=function(t){return[{relation:"equ",multiplier:t.multiplier}]},Pt=function(t){return[{relation:"equ",constant:t}]},qt="(",Zt={type:"literal",value:"(",description:'"("'},Gt=")",Xt={type:"literal",value:")",description:'")"'},Wt=function(t,e){return[t].concat(e.map(function(t){return t[1]}))},$t="@",Ut={type:"literal",value:"@",description:'"@"'},Bt=function(t,e,r){return z({relation:"equ"},t||{},e,r?r[1]:{})},Qt=function(t,e,r){return z({relation:"equ",equalSpacing:!0},t||{},e,r?r[1]:{})},Yt="==",Jt={type:"literal",value:"==",description:'"=="'},Kt=function(){return{relation:"equ"}},te="<=",ee={type:"literal",value:"<=",description:'"<="'},re=function(){return{relation:"leq"}},ne=">=",ie={type:"literal",value:">=",description:'">="'},ae=function(){return{relation:"geq"}},oe=/^[0-9]/,ue={type:"class",value:"[0-9]",description:"[0-9]"},se=function(t){return{priority:parseInt(t.join(""),10)}},ce=function(t){return{constant:t}},le=function(t){return{constant:-t}},fe="+",pe={type:"literal",value:"+",description:'"+"'},he="%",de={type:"literal",value:"%",description:'"%"'},ve=function(t){return{view:null,multiplier:t/100}},ye=function(t){return{view:null,multiplier:t/-100}},_e=function(t,e,r,n){return{view:t.view,attribute:e?e:void 0,multiplier:r?r:1,constant:n?n:void 0}},ge=".left",be={type:"literal",value:".left",description:'".left"'},we=function(){return"left"},me=".right",Ae={type:"literal",value:".right",description:'".right"'},Ee=function(){return"right"},Ce=".top",xe={type:"literal",value:".top",description:'".top"'},Oe=function(){return"top"},Ve=".bottom",Ie={type:"literal",value:".bottom",description:'".bottom"'},Te=function(){return"bottom"},Se=".width",ke={type:"literal",value:".width",description:'".width"'},je=function(){return"width"},Me=".height",He={type:"literal",value:".height",description:'".height"'},Fe=function(){return"height"},Re=".centerX",ze={type:"literal",value:".centerX",description:'".centerX"'},Le=function(){return"centerX"},De=".centerY",Ne={type:"literal",value:".centerY",description:'".centerY"'},Pe=function(){return"centerY"},qe="/",Ze={type:"literal",value:"/",description:'"/"'},Ge=function(t){return 1/t},Xe="/+",We={type:"literal",value:"/+",description:'"/+"'},$e="/-",Ue={type:"literal",value:"/-",description:'"/-"'},Be=function(t){return-1/t},Qe="*",Ye={type:"literal",value:"*",description:'"*"'},Je=function(t){return t},Ke="*+",tr={type:"literal",value:"*+",description:'"*+"'},er="*-",rr={type:"literal",value:"*-",description:'"*-"'},nr=function(t){return-t},ir=/^[a-zA-Z_]/,ar={type:"class",value:"[a-zA-Z_]",description:"[a-zA-Z_]"},or=/^[a-zA-Z0-9_]/,ur={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},sr=function(t,e,n){return{view:t+e,range:n,$parserOffset:r()}},cr=function(t,e){return{view:t+e,$parserOffset:r()}},lr="..",fr={type:"literal",value:"..",description:'".."'},pr=function(t){return parseInt(t)},hr=".",dr={type:"literal",value:".",description:'"."'},vr=function(t,e){return parseFloat(t.concat(".").concat(e).join(""),10)},yr=function(t){return parseInt(t.join(""),10)},_r=0,gr=0,br=0,wr={line:1,column:1,seenCR:!1},mr=0,Ar=[],Er=0;if("startRule"in D){if(!(D.startRule in P))throw new Error("Can't start parsing from rule \""+D.startRule+'".');q=P[D.startRule]}if(L=q(),L!==N&&_r===t.length)return L;throw L!==N&&_r<t.length&&i({type:"end",description:"end of input"}),a(null,Ar,mr)}return t(e,Error),{SyntaxError:e,parse:r}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var r=new _["default"].Variable;return this._solver.addConstraint(new _["default"].Constraint(r,_["default"].Operator.Eq,e)),r}function o(t){return t?t.name?(this._subViews[t.name]=this._subViews[t.name]||new E["default"]({name:t.name,solver:this._solver}),this._subViews[t.name]._type=this._subViews[t.name]._type||t.type,this._subViews[t.name]):(this._subViews[t]=this._subViews[t]||new E["default"]({name:t,solver:this._solver}),this._subViews[t]):this._parentSubView}function u(t){var e=4;if(t.view1||"left"!==t.attr1)if(t.view1||"top"!==t.attr1)if(t.view2||"right"!==t.attr2)if(t.view2||"bottom"!==t.attr2)switch(t.attr1){case"left":case"right":case"centerX":case"leading":case"trailing":e=4;break;case"zIndex":e=6;break;default:e=5}else e=2;else e=1;else e=0;else e=3;return this._spacingVars=this._spacingVars||new Array(7),this._spacingExpr=this._spacingExpr||new Array(7),this._spacingVars[e]||(this._spacingVars[e]=new _["default"].Variable,this._solver.addEditVariable(this._spacingVars[e],_["default"].Strength.create(999,1e3,1e3)),this._spacingExpr[e]=this._spacingVars[e].multiply(-1),this._solver.suggestValue(this._spacingVars[e],this._spacing[e])),this._spacingExpr[e]}function s(t,e){return t.view1===e.view1&&t.attr1===e.attr1&&t.relation===e.relation&&t.view2===e.view2&&t.attr2===e.attr2&&t.multiplier===e.multiplier&&t.constant===e.constant&&t.priority===e.priority}function c(t){var e=void 0,r=void 0!==t.multiplier?t.multiplier:1,n=void 0!==t.constant?t.constant:0;"default"===n&&(n=u.call(this,t));var i=o.call(this,t.view1)._getAttr(t.attr1),s=void 0;t.attr2===b["default"].CONST?s=a.call(this,void 0,t.constant):(s=o.call(this,t.view2)._getAttr(t.attr2),1!==r&&n?s=s.multiply(r).plus(n):n?s=s.plus(n):1!==r&&(s=s.multiply(r)));var c=void 0!==t.priority&&t.priority<1e3?_["default"].Strength.create(0,t.priority,1e3):C;switch(t.relation){case m["default"].EQU:e=new _["default"].Constraint(i,_["default"].Operator.Eq,s,c);break;case m["default"].GEQ:e=new _["default"].Constraint(i,_["default"].Operator.Ge,s,c);break;case m["default"].LEQ:e=new _["default"].Constraint(i,_["default"].Operator.Le,s,c);break;default:throw"Invalid relation specified: "+t.relation}return e}function l(t){var e=c.call(this,t);this._constraints.push({constraint:t,relation:e}),this._solver.addConstraint(e)}function f(t){var e=(0,v["default"])(this._constraints,function(e){return s(e.constraint,t)});this._solver.removeConstraint(e.relation)}function p(t,e){if(t===e)return!0;if(!t||!e)return!1;for(var r=0;7>r;r++)if(t[r]!==e[r])return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),d=r(8),v=n(d),y=r(15),_=n(y),g=r(1),b=n(g),w=r(2),m=n(w),A=r(16),E=n(A),C=_["default"].Strength.create(0,1e3,1e3),x=function(){function t(e){i(this,t),this._solver=new _["default"].Solver,this._subViews={},this._constraints=[],this._parentSubView=new E["default"]({solver:this._solver}),this.setSpacing(e&&void 0!==e.spacing?e.spacing:8),e&&(void 0===e.width&&void 0===e.height||this.setSize(e.width,e.height),e.constraints&&this.addConstraints(e.constraints))}return h(t,[{key:"setSize",value:function(t,e){return this._parentSubView.intrinsicWidth=t,this._parentSubView.intrinsicHeight=e,this}},{key:"setSpacing",value:function(t){switch(Array.isArray(t)?t.length:-1){case-1:t=[t,t,t,t,t,t,1];break;case 1:t=[t[0],t[0],t[0],t[0],t[0],t[0],1];break;case 2:t=[t[1],t[0],t[1],t[0],t[0],t[1],1];break;case 3:t=[t[1],t[0],t[1],t[0],t[0],t[1],t[2]];break;case 6:t=[t[0],t[1],t[2],t[3],t[4],t[5],1];break;case 7:break;default:throw"Invalid spacing syntax"}if(!p(this._spacing,t)&&(this._spacing=t,this._spacingVars)){for(var e=0;e<this._spacingVars.length;e++)this._spacingVars[e]&&this._solver.suggestValue(this._spacingVars[e],this._spacing[e]);this._solver.updateVariables()}return this}},{key:"addConstraint",value:function(t){return l.call(this,t),this._solver.updateVariables(),this}},{key:"addConstraints",value:function(t){for(var e=0;e<t.length;e++)l.call(this,t[e]);return this._solver.updateVariables(),this}},{key:"removeConstraint",value:function(t){return f.call(this,t),this._solver.updateVariables(),this}},{key:"removeConstraints",value:function(t){for(var e=0;e<t.length;e++)f.call(this,t[e]);return this._solver.updateVariables(),this}},{key:"width",get:function(){return this._parentSubView.intrinsicWidth}},{key:"height",get:function(){return this._parentSubView.intrinsicHeight}},{key:"fittingWidth",get:function(){return this._parentSubView.width}},{key:"fittingHeight",get:function(){return this._parentSubView.height}},{key:"subViews",get:function(){return this._subViews}}]),t}();e["default"]=x},function(t,e,r){function n(t,e){if(e=u(e,3),s(t)){var r=o(t,e);return r>-1?t[r]:void 0}return a(t,e,i)}var i=r(9),a=r(10),o=r(11),u=r(12),s=Array.isArray;t.exports=n},function(t,e){function r(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function n(t,e){return t="number"==typeof t||O.test(t)?+t:-1,e=null==e?m:e,t>-1&&t%1==0&&e>t}function i(t,e){return t&&H(t,e,w)}function a(t,e){return I.call(t,e)||"object"==typeof t&&e in t&&null===S(t)}function o(t){return j(Object(t))}function u(t){return function(e){return null==e?void 0:e[t]}}function s(t,e){return function(r,n){if(null==r)return r;if(!h(r))return t(r,n);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&n(o[a],a,o)!==!1;);return r}}function c(t){return function(e,r,n){for(var i=-1,a=Object(e),o=n(e),u=o.length;u--;){var s=o[t?u:++i];if(r(a[s],s,a)===!1)break}return e}}function l(t){var e=t?t.length:void 0;return y(e)&&(R(t)||b(t)||p(t))?r(e,String):null}function f(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||V;return t===r}function p(t){return d(t)&&I.call(t,"callee")&&(!k.call(t,"callee")||T.call(t)==A)}function h(t){return null!=t&&y(F(t))&&!v(t)}function d(t){return g(t)&&h(t)}function v(t){var e=_(t)?T.call(t):"";return e==E||e==C}function y(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function _(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function b(t){return"string"==typeof t||!R(t)&&g(t)&&T.call(t)==x}function w(t){var e=f(t);if(!e&&!h(t))return o(t);var r=l(t),i=!!r,u=r||[],s=u.length;for(var c in t)!a(t,c)||i&&("length"==c||n(c,s))||e&&"constructor"==c||u.push(c);return u}var m=9007199254740991,A="[object Arguments]",E="[object Function]",C="[object GeneratorFunction]",x="[object String]",O=/^(?:0|[1-9]\d*)$/,V=Object.prototype,I=V.hasOwnProperty,T=V.toString,S=Object.getPrototypeOf,k=V.propertyIsEnumerable,j=Object.keys,M=s(i),H=c(),F=u("length"),R=Array.isArray;t.exports=M},function(t,e){function r(t,e,r,n){var i;return r(t,function(t,r,a){return e(t,r,a)?(i=n?r:t,!1):void 0}),i}t.exports=r},function(t,e){function r(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}t.exports=r},function(t,e,r){(function(t,n){function i(t,e){for(var r=-1,n=t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}function a(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function o(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function u(t,e){return i(e,function(e){return[e,t[e]]})}function s(t){return t&&t.Object===Object?t:null}function c(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function l(t,e){return t="number"==typeof t||le.test(t)?+t:-1,e=null==e?jt:e,t>-1&&t%1==0&&e>t}function f(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function p(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function h(){}function d(t,e){return y(t,e)&&delete t[e]}function v(t,e){if(ze){var r=t[e];return r===Tt?void 0:r}return Ee.call(t,e)?t[e]:void 0}function y(t,e){return ze?void 0!==t[e]:Ee.call(t,e)}function _(t,e,r){t[e]=ze&&void 0===r?Tt:r}function g(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function b(){this.__data__={hash:new h,map:Me?new Me:[],string:new h}}function w(t){var e=this.__data__;return it(t)?d("string"==typeof t?e.string:e.hash,t):Me?e.map["delete"](t):S(e.map,t)}function m(t){var e=this.__data__;return it(t)?v("string"==typeof t?e.string:e.hash,t):Me?e.map.get(t):k(e.map,t)}function A(t){var e=this.__data__;return it(t)?y("string"==typeof t?e.string:e.hash,t):Me?e.map.has(t):j(e.map,t)}function E(t,e){var r=this.__data__;return it(t)?_("string"==typeof t?r.string:r.hash,t,e):Me?r.map.set(t,e):H(r.map,t,e),this}function C(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function x(){this.__data__={array:[],map:null}}function O(t){var e=this.__data__,r=e.array;return r?S(r,t):e.map["delete"](t)}function V(t){var e=this.__data__,r=e.array;return r?k(r,t):e.map.get(t)}function I(t){var e=this.__data__,r=e.array;return r?j(r,t):e.map.has(t)}function T(t,e){var r=this.__data__,n=r.array;n&&(n.length<It-1?H(n,t,e):(r.array=null,r.map=new g(n)));var i=r.map;return i&&i.set(t,e),this}function S(t,e){var r=M(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():Te.call(t,r,1),!0}function k(t,e){var r=M(t,e);return 0>r?void 0:t[r][1]}function j(t,e){return M(t,e)>-1}function M(t,e){for(var r=t.length;r--;)if(ct(t[r][0],e))return r;return-1}function H(t,e,r){var n=M(t,e);0>n?t.push([e,r]):t[n][1]=r}function F(t){return We(t)?t:Vt(t)}function R(t,e){e=nt(e,t)?[e]:F(e);for(var r=0,n=e.length;null!=t&&n>r;)t=t[e[r++]];return r&&r==n?t:void 0}function z(t,e){return Ee.call(t,e)||"object"==typeof t&&e in t&&null===K(t)}function L(t,e){return e in Object(t)}function D(t,e,r,n,i){return t===e?!0:null==t||null==e||!vt(t)&&!yt(e)?t!==t&&e!==e:N(t,e,D,r,n,i)}function N(t,e,r,n,i,a){var o=We(t),u=We(e),s=Ht,l=Ht;o||(s=tt(t),s=s==Mt?qt:s),u||(l=tt(e),l=l==Mt?qt:l);var f=s==qt&&!c(t),p=l==qt&&!c(e),h=s==l;if(h&&!f)return a||(a=new C),o||wt(t)?U(t,e,r,n,i,a):B(t,e,s,r,n,i,a);if(!(i&kt)){var d=f&&Ee.call(t,"__wrapped__"),v=p&&Ee.call(e,"__wrapped__");if(d||v){var y=d?t.value():t,_=v?e.value():e;return a||(a=new C),r(y,_,n,i,a)}}return h?(a||(a=new C),Q(t,e,r,n,i,a)):!1}function P(t,e,r,n){var i=r.length,a=i,o=!n;if(null==t)return!a;for(t=Object(t);i--;){var u=r[i];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){u=r[i];var s=u[0],c=t[s],l=u[1];if(o&&u[2]){if(void 0===c&&!(s in t))return!1}else{var f=new C;if(n)var p=n(c,l,s,t,e,f);if(!(void 0===p?D(l,c,n,St|kt,f):p))return!1}}return!0}function q(t){return"function"==typeof t?t:null==t?xt:"object"==typeof t?We(t)?X(t[0],t[1]):G(t):Ot(t)}function Z(t){return ke(Object(t))}function G(t){var e=Y(t);return 1==e.length&&e[0][2]?ut(e[0][0],e[0][1]):function(r){return r===t||P(r,t,e)}}function X(t,e){return nt(t)&&ot(e)?ut(t,e):function(r){var n=mt(r,t);return void 0===n&&n===e?At(r,t):D(e,n,void 0,St|kt)}}function W(t){return function(e){return null==e?void 0:e[t]}}function $(t){return function(e){return R(e,t)}}function U(t,e,r,n,i,o){var u=-1,s=i&kt,c=i&St,l=t.length,f=e.length;if(l!=f&&!(s&&f>l))return!1;var p=o.get(t);if(p)return p==e;var h=!0;for(o.set(t,e);++u<l;){var d=t[u],v=e[u];if(n)var y=s?n(v,d,u,e,t,o):n(d,v,u,t,e,o);if(void 0!==y){if(y)continue;h=!1;break}if(c){if(!a(e,function(t){return d===t||r(d,t,n,i,o)})){h=!1;break}}else if(d!==v&&!r(d,v,n,i,o)){h=!1;break}}return o["delete"](t),h}function B(t,e,r,n,i,a,o){switch(r){case Qt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Bt:return!(t.byteLength!=e.byteLength||!n(new Ve(t),new Ve(e)));case Ft:case Rt:return+t==+e;case zt:return t.name==e.name&&t.message==e.message;case Pt:return t!=+t?e!=+e:t==+e;case Gt:case Wt:return t==e+"";case Nt:var u=f;case Xt:var s=a&kt;if(u||(u=p),t.size!=e.size&&!s)return!1;var c=o.get(t);return c?c==e:(a|=St,o.set(t,e),U(u(t),u(e),n,i,a,o));case $t:if(Ge)return Ge.call(t)==Ge.call(e)}return!1}function Q(t,e,r,n,i,a){var o=i&kt,u=Et(t),s=u.length,c=Et(e),l=c.length;if(s!=l&&!o)return!1;for(var f=s;f--;){var p=u[f];if(!(o?p in e:z(e,p)))return!1}var h=a.get(t);if(h)return h==e;var d=!0;a.set(t,e);for(var v=o;++f<s;){p=u[f];var y=t[p],_=e[p];if(n)var g=o?n(_,y,p,e,t,a):n(y,_,p,t,e,a);if(!(void 0===g?y===_||r(y,_,n,i,a):g)){d=!1;break}v||(v="constructor"==p)}if(d&&!v){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(d=!1)}return a["delete"](t),d}function Y(t){for(var e=Ct(t),r=e.length;r--;)e[r][2]=ot(e[r][1]);return e}function J(t,e){var r=t[e];return _t(r)?r:void 0}function K(t){return Se(Object(t))}function tt(t){return Ce.call(t)}function et(t,e,r){e=nt(e,t)?[e]:F(e);for(var n,i=-1,a=e.length;++i<a;){var o=e[i];if(!(n=null!=t&&r(t,o)))break;t=t[o]}if(n)return n;var a=t?t.length:0;return!!a&&dt(a)&&l(o,a)&&(We(t)||gt(t)||lt(t))}function rt(t){var e=t?t.length:void 0;return dt(e)&&(We(t)||gt(t)||lt(t))?o(e,String):null}function nt(t,e){var r=typeof t;return"number"==r||"symbol"==r?!0:!We(t)&&(bt(t)||ue.test(t)||!oe.test(t)||null!=e&&t in Object(e))}function it(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function at(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||me;return t===r}function ot(t){return t===t&&!vt(t)}function ut(t,e){return function(r){return null==r?!1:r[t]===e&&(void 0!==e||t in Object(r))}}function st(t){if(null!=t){try{return Ae.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ct(t,e){return t===e||t!==t&&e!==e}function lt(t){return pt(t)&&Ee.call(t,"callee")&&(!Ie.call(t,"callee")||Ce.call(t)==Mt)}function ft(t){return null!=t&&dt(Xe(t))&&!ht(t)}function pt(t){return yt(t)&&ft(t)}function ht(t){var e=vt(t)?Ce.call(t):"";return e==Lt||e==Dt}function dt(t){return"number"==typeof t&&t>-1&&t%1==0&&jt>=t}function vt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function yt(t){return!!t&&"object"==typeof t}function _t(t){if(!vt(t))return!1;var e=ht(t)||c(t)?xe:ce;return e.test(st(t))}function gt(t){return"string"==typeof t||!We(t)&&yt(t)&&Ce.call(t)==Wt}function bt(t){return"symbol"==typeof t||yt(t)&&Ce.call(t)==$t}function wt(t){return yt(t)&&dt(t.length)&&!!fe[Ce.call(t)]}function mt(t,e,r){var n=null==t?void 0:R(t,e);return void 0===n?r:n}function At(t,e){return null!=t&&et(t,e,L)}function Et(t){var e=at(t);if(!e&&!ft(t))return Z(t);var r=rt(t),n=!!r,i=r||[],a=i.length;for(var o in t)!z(t,o)||n&&("length"==o||l(o,a))||e&&"constructor"==o||i.push(o);return i}function Ct(t){return u(t,Et(t))}function xt(t){return t}function Ot(t){return nt(t)?W(t):$(t)}var Vt=r(14),It=200,Tt="__lodash_hash_undefined__",St=1,kt=2,jt=9007199254740991,Mt="[object Arguments]",Ht="[object Array]",Ft="[object Boolean]",Rt="[object Date]",zt="[object Error]",Lt="[object Function]",Dt="[object GeneratorFunction]",Nt="[object Map]",Pt="[object Number]",qt="[object Object]",Zt="[object Promise]",Gt="[object RegExp]",Xt="[object Set]",Wt="[object String]",$t="[object Symbol]",Ut="[object WeakMap]",Bt="[object ArrayBuffer]",Qt="[object DataView]",Yt="[object Float32Array]",Jt="[object Float64Array]",Kt="[object Int8Array]",te="[object Int16Array]",ee="[object Int32Array]",re="[object Uint8Array]",ne="[object Uint8ClampedArray]",ie="[object Uint16Array]",ae="[object Uint32Array]",oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ue=/^\w*$/,se=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,fe={};fe[Yt]=fe[Jt]=fe[Kt]=fe[te]=fe[ee]=fe[re]=fe[ne]=fe[ie]=fe[ae]=!0,fe[Mt]=fe[Ht]=fe[Bt]=fe[Ft]=fe[Qt]=fe[Rt]=fe[zt]=fe[Lt]=fe[Nt]=fe[Pt]=fe[qt]=fe[Gt]=fe[Xt]=fe[Wt]=fe[Ut]=!1;var pe={"function":!0,object:!0},he=pe[typeof e]&&e&&!e.nodeType?e:void 0,de=pe[typeof t]&&t&&!t.nodeType?t:void 0,ve=s(he&&de&&"object"==typeof n&&n),ye=s(pe[typeof self]&&self),_e=s(pe[typeof window]&&window),ge=s(pe[typeof this]&&this),be=ve||_e!==(ge&&ge.window)&&_e||ye||ge||Function("return this")(),we=Array.prototype,me=Object.prototype,Ae=Function.prototype.toString,Ee=me.hasOwnProperty,Ce=me.toString,xe=RegExp("^"+Ae.call(Ee).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oe=be.Symbol,Ve=be.Uint8Array,Ie=me.propertyIsEnumerable,Te=we.splice,Se=Object.getPrototypeOf,ke=Object.keys,je=J(be,"DataView"),Me=J(be,"Map"),He=J(be,"Promise"),Fe=J(be,"Set"),Re=J(be,"WeakMap"),ze=J(Object,"create"),Le=st(je),De=st(Me),Ne=st(He),Pe=st(Fe),qe=st(Re),Ze=Oe?Oe.prototype:void 0,Ge=Ze?Ze.valueOf:void 0;h.prototype=ze?ze(null):me,g.prototype.clear=b,g.prototype["delete"]=w,g.prototype.get=m,g.prototype.has=A,g.prototype.set=E,C.prototype.clear=x,C.prototype["delete"]=O,C.prototype.get=V,C.prototype.has=I,C.prototype.set=T;var Xe=W("length");(je&&tt(new je(new ArrayBuffer(1)))!=Qt||Me&&tt(new Me)!=Nt||He&&tt(He.resolve())!=Zt||Fe&&tt(new Fe)!=Xt||Re&&tt(new Re)!=Ut)&&(tt=function(t){var e=Ce.call(t),r=e==qt?t.constructor:void 0,n=r?st(r):void 0;if(n)switch(n){case Le:return Qt;case De:return Nt;case Ne:return Zt;case Pe:return Xt;case qe:return Ut}return e});var We=Array.isArray;t.exports=q}).call(e,r(13)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){(function(t,r){function n(t){return t&&t.Object===Object?t:null}function i(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(r){}return e}function a(){}function o(t,e){return s(t,e)&&delete t[e]}function u(t,e){if(at){var r=t[e];return r===M?void 0:r}return K.call(t,e)?t[e]:void 0}function s(t,e){return at?void 0!==t[e]:K.call(t,e)}function c(t,e,r){t[e]=at&&void 0===r?M:r}function l(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function f(){this.__data__={hash:new a,map:it?new it:[],string:new a}}function p(t){var e=this.__data__;return A(t)?o("string"==typeof t?e.string:e.hash,t):it?e.map["delete"](t):y(e.map,t)}function h(t){var e=this.__data__;return A(t)?u("string"==typeof t?e.string:e.hash,t):it?e.map.get(t):_(e.map,t)}function d(t){var e=this.__data__;return A(t)?s("string"==typeof t?e.string:e.hash,t):it?e.map.has(t):g(e.map,t)}function v(t,e){var r=this.__data__;return A(t)?c("string"==typeof t?r.string:r.hash,t,e):it?r.map.set(t,e):w(r.map,t,e),this}function y(t,e){var r=b(t,e);if(0>r)return!1;var n=t.length-1;return r==n?t.pop():nt.call(t,r,1),!0}function _(t,e){var r=b(t,e);return 0>r?void 0:t[r][1]}function g(t,e){return b(t,e)>-1}function b(t,e){for(var r=t.length;r--;)if(x(t[r][0],e))return r;return-1}function w(t,e,r){var n=b(t,e);0>n?t.push([e,r]):t[n][1]=r}function m(t,e){var r=t[e];return T(r)?r:void 0}function A(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function E(t){if(null!=t){try{return J.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function C(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(j);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=t.apply(this,n);return r.cache=a.set(i,o),o};return r.cache=new(C.Cache||l),r}function x(t,e){return t===e||t!==t&&e!==e}function O(t){var e=V(t)?tt.call(t):"";return e==F||e==R}function V(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function I(t){return!!t&&"object"==typeof t}function T(t){if(!V(t))return!1;var e=O(t)||i(t)?et:P;return e.test(E(t))}function S(t){return"symbol"==typeof t||I(t)&&tt.call(t)==z}function k(t){if("string"==typeof t)return t;if(null==t)return"";if(S(t))return ut?ut.call(t):"";var e=t+"";return"0"==e&&1/t==-H?"-0":e}var j="Expected a function",M="__lodash_hash_undefined__",H=1/0,F="[object Function]",R="[object GeneratorFunction]",z="[object Symbol]",L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,D=/[\\^$.*+?()[\]{}|]/g,N=/\\(\\)?/g,P=/^\[object .+?Constructor\]$/,q={"function":!0,object:!0},Z=q[typeof e]&&e&&!e.nodeType?e:void 0,G=q[typeof t]&&t&&!t.nodeType?t:void 0,X=n(Z&&G&&"object"==typeof r&&r),W=n(q[typeof self]&&self),$=n(q[typeof window]&&window),U=n(q[typeof this]&&this),B=X||$!==(U&&U.window)&&$||W||U||Function("return this")(),Q=Array.prototype,Y=Object.prototype,J=Function.prototype.toString,K=Y.hasOwnProperty,tt=Y.toString,et=RegExp("^"+J.call(K).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=B.Symbol,nt=Q.splice,it=m(B,"Map"),at=m(Object,"create"),ot=rt?rt.prototype:void 0,ut=ot?ot.toString:void 0;a.prototype=at?at(null):Y,l.prototype.clear=f,l.prototype["delete"]=p,l.prototype.get=h,l.prototype.has=d,l.prototype.set=v;var st=C(function(t){var e=[];return k(t).replace(L,function(t,r,n,i){e.push(n?i.replace(N,"$1"):r||t)}),e});C.Cache=l,t.exports=st}).call(e,r(13)(t),function(){return this}())},function(t,e,r){var n,i;!function(r,a){n=[],i=function(){return r.kiwi=a()}.apply(e,n),!(void 0!==i&&(t.exports=i))}(this,function(){var t;!function(t){function e(t){return t instanceof Array?new a(t):t.__iter__()}function r(t){return t instanceof Array?new o(t):t.__reversed__()}function n(t){return t.__next__()}function i(t,e){if(t instanceof Array){for(var r=0,n=t.length;n>r;++r)if(e(t[r])===!1)return}else for(var i,a=t.__iter__();void 0!==(i=a.__next__());)if(e(i)===!1)return}var a=function(){function t(t,e){"undefined"==typeof e&&(e=0),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[this._index++]},t.prototype.__iter__=function(){return this},t}();t.ArrayIterator=a;var o=function(){function t(t,e){"undefined"==typeof e&&(e=t.length),this._array=t,this._index=Math.max(0,Math.min(e,t.length))}return t.prototype.__next__=function(){return this._array[--this._index]},t.prototype.__iter__=function(){return this},t}();t.ReverseArrayIterator=o,t.iter=e,t.reversed=r,t.next=n,t.forEach=i}(t||(t={}));var t;!function(t){var e=function(){function t(t,e){this.first=t,this.second=e}return t.prototype.copy=function(){return new t(this.first,this.second)},t}();t.Pair=e}(t||(t={}));var t;!function(t){function e(t,e,r){for(var n,i,a=0,o=t.length;o>0;)n=o>>1,i=a+n,r(t[i],e)<0?(a=i+1,o-=n+1):o=n;return a}function r(t,r,n){var i=e(t,r,n);if(i===t.length)return-1;var a=t[i];return 0!==n(a,r)?-1:i}function n(t,r,n){var i=e(t,r,n);if(i!==t.length){var a=t[i];if(0===n(a,r))return a}}t.lowerBound=e,t.binarySearch=r,t.binaryFind=n}(t||(t={}));var t;!function(t){var e=function(){function e(){this._array=[]}return e.prototype.size=function(){return this._array.length},e.prototype.empty=function(){return 0===this._array.length},e.prototype.itemAt=function(t){return this._array[t]},e.prototype.takeAt=function(t){return this._array.splice(t,1)[0]},e.prototype.clear=function(){this._array=[]},e.prototype.swap=function(t){var e=this._array;this._array=t._array,t._array=e},e.prototype.__iter__=function(){return t.iter(this._array)},e.prototype.__reversed__=function(){return t.reversed(this._array)},e}();t.ArrayBase=e}(t||(t={}));var t,e=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r};!function(t){function r(t){return function(e,r){return t(e.first,r)}}function n(t,e,r){for(var n=0,i=0,a=t.length,o=e.length,u=[];a>n&&o>i;){var s=t[n],c=e[i],l=r(s.first,c.first);0>l?(u.push(s.copy()),++n):l>0?(u.push(c.copy()),++i):(u.push(c.copy()),++n,++i)}for(;a>n;)u.push(t[n].copy()),++n;for(;o>i;)u.push(e[i].copy()),++i;return u}var i=function(i){function a(t){i.call(this),this._compare=t,this._wrapped=r(t)}return e(a,i),a.prototype.comparitor=function(){return this._compare},a.prototype.indexOf=function(e){return t.binarySearch(this._array,e,this._wrapped)},a.prototype.contains=function(e){return t.binarySearch(this._array,e,this._wrapped)>=0},a.prototype.find=function(e){return t.binaryFind(this._array,e,this._wrapped)},a.prototype.setDefault=function(e,r){var n=this._array,i=t.lowerBound(n,e,this._wrapped);if(i===n.length){var a=new t.Pair(e,r());return n.push(a),a}var o=n[i];if(0!==this._compare(o.first,e)){var a=new t.Pair(e,r());return n.splice(i,0,a),a}return o},a.prototype.insert=function(e,r){var n=this._array,i=t.lowerBound(n,e,this._wrapped);if(i===n.length){var a=new t.Pair(e,r);return n.push(a),a}var o=n[i];if(0!==this._compare(o.first,e)){var a=new t.Pair(e,r);return n.splice(i,0,a),a}return o.second=r,o},a.prototype.update=function(e){var r=this;if(e instanceof a){var i=e;this._array=n(this._array,i._array,this._compare)}else t.forEach(e,function(t){r.insert(t.first,t.second)})},a.prototype.erase=function(e){var r=this._array,n=t.binarySearch(r,e,this._wrapped);return 0>n?void 0:r.splice(n,1)[0]},a.prototype.copy=function(){for(var t=new a(this._compare),e=t._array,r=this._array,n=0,i=r.length;i>n;++n)e.push(r[n].copy());return t},a}(t.ArrayBase);t.AssociativeArray=i}(t||(t={}));var r;!function(t){!function(t){t[t.Le=0]="Le",t[t.Ge=1]="Ge",
t[t.Eq=2]="Eq"}(t.Operator||(t.Operator={}));var e=(t.Operator,function(){function e(e,n,i,a){void 0===a&&(a=t.Strength.required),this._id=r++,this._operator=n,this._strength=t.Strength.clip(a),void 0===i&&e instanceof t.Expression?this._expression=e:this._expression=e.minus(i)}return e.Compare=function(t,e){return t.id()-e.id()},e.prototype.id=function(){return this._id},e.prototype.expression=function(){return this._expression},e.prototype.op=function(){return this._operator},e.prototype.strength=function(){return this._strength},e}());t.Constraint=e;var r=0}(r||(r={}));var r;!function(e){function r(e){return new t.AssociativeArray(e)}e.createMap=r}(r||(r={}));var r;!function(t){var e=function(){function e(t){void 0===t&&(t=""),this._value=0,this._context=null,this._id=r++,this._name=t}return e.Compare=function(t,e){return t.id()-e.id()},e.prototype.id=function(){return this._id},e.prototype.name=function(){return this._name},e.prototype.setName=function(t){this._name=t},e.prototype.context=function(){return this._context},e.prototype.setContext=function(t){this._context=t},e.prototype.value=function(){return this._value},e.prototype.setValue=function(t){this._value=t},e.prototype.plus=function(e){return new t.Expression(this,e)},e.prototype.minus=function(e){return new t.Expression(this,"number"==typeof e?-e:[-1,e])},e.prototype.multiply=function(e){return new t.Expression([e,this])},e.prototype.divide=function(e){return new t.Expression([1/e,this])},e.prototype.toJSON=function(){return{name:this._name,value:this._value}},e}();t.Variable=e;var r=0}(r||(r={}));var r;!function(t){function e(e){for(var n=0,i=function(){return 0},a=t.createMap(t.Variable.Compare),o=0,u=e.length;u>o;++o){var s=e[o];if("number"==typeof s)n+=s;else if(s instanceof t.Variable)a.setDefault(s,i).second+=1;else if(s instanceof r){n+=s.constant();for(var c=s.terms(),l=0,f=c.size();f>l;l++){var p=c.itemAt(l);a.setDefault(p.first,i).second+=p.second}}else{if(!(s instanceof Array))throw new Error("invalid Expression argument: "+s);if(2!==s.length)throw new Error("array must have length 2");var h=s[0],d=s[1];if("number"!=typeof h)throw new Error("array item 0 must be a number");if(d instanceof t.Variable)a.setDefault(d,i).second+=h;else{if(!(d instanceof r))throw new Error("array item 1 must be a variable or expression");n+=d.constant()*h;for(var c=d.terms(),l=0,f=c.size();f>l;l++){var p=c.itemAt(l);a.setDefault(p.first,i).second+=p.second*h}}}}return{terms:a,constant:n}}var r=function(){function t(){var t=e(arguments);this._terms=t.terms,this._constant=t.constant}return t.prototype.terms=function(){return this._terms},t.prototype.constant=function(){return this._constant},t.prototype.value=function(){for(var t=this._constant,e=0,r=this._terms.size();r>e;e++){var n=this._terms.itemAt(e);t+=n.first.value()*n.second}return t},t.prototype.plus=function(e){return new t(this,e)},t.prototype.minus=function(e){return new t(this,"number"==typeof e?-e:[-1,e])},t.prototype.multiply=function(e){return new t([e,this])},t.prototype.divide=function(e){return new t([1/e,this])},t}();t.Expression=r}(r||(r={}));var r;!function(t){var e;!function(t){function e(t,e,r,n){void 0===n&&(n=1);var i=0;return i+=1e6*Math.max(0,Math.min(1e3,t*n)),i+=1e3*Math.max(0,Math.min(1e3,e*n)),i+=Math.max(0,Math.min(1e3,r*n))}function r(e){return Math.max(0,Math.min(t.required,e))}t.create=e,t.required=e(1e3,1e3,1e3),t.strong=e(1,0,0),t.medium=e(0,1,0),t.weak=e(0,0,1),t.clip=r}(e=t.Strength||(t.Strength={}))}(r||(r={}));var r;return function(t){function e(t){var e=1e-8;return 0>t?e>-t:e>t}function r(){return t.createMap(t.Constraint.Compare)}function n(){return t.createMap(s.Compare)}function i(){return t.createMap(t.Variable.Compare)}function a(){return t.createMap(t.Variable.Compare)}var o=function(){function o(){this._cnMap=r(),this._rowMap=n(),this._varMap=i(),this._editMap=a(),this._infeasibleRows=[],this._objective=new l,this._artificial=null,this._idTick=0}return o.prototype.createConstraint=function(e,r,n,i){void 0===i&&(i=t.Strength.required);var a=new t.Constraint(e,r,n,i);return this.addConstraint(a),a},o.prototype.addConstraint=function(t){var r=this._cnMap.find(t);if(void 0!==r)throw new Error("duplicate constraint");var n=this._createRow(t),i=n.row,a=n.tag,o=this._chooseSubject(i,a);if(0===o.type()&&i.allDummies()){if(!e(i.constant()))throw new Error("unsatisfiable constraint");o=a.marker}if(0===o.type()){if(!this._addWithArtificialVariable(i))throw new Error("unsatisfiable constraint")}else i.solveFor(o),this._substitute(o,i),this._rowMap.insert(o,i);this._cnMap.insert(t,a),this._optimize(this._objective)},o.prototype.removeConstraint=function(t){var e=this._cnMap.erase(t);if(void 0===e)throw new Error("unknown constraint");this._removeConstraintEffects(t,e.second);var r=e.second.marker,n=this._rowMap.erase(r);if(void 0===n){var i=this._getMarkerLeavingSymbol(r);if(0===i.type())throw new Error("failed to find leaving row");n=this._rowMap.erase(i),n.second.solveForEx(i,r),this._substitute(r,n.second)}this._optimize(this._objective)},o.prototype.hasConstraint=function(t){return this._cnMap.contains(t)},o.prototype.addEditVariable=function(e,r){var n=this._editMap.find(e);if(void 0!==n)throw new Error("duplicate edit variable");if(r=t.Strength.clip(r),r===t.Strength.required)throw new Error("bad required strength");var i=new t.Expression(e),a=new t.Constraint(i,2,void 0,r);this.addConstraint(a);var o=this._cnMap.find(a).second,u={tag:o,constraint:a,constant:0};this._editMap.insert(e,u)},o.prototype.removeEditVariable=function(t){var e=this._editMap.erase(t);if(void 0===e)throw new Error("unknown edit variable");this.removeConstraint(e.second.constraint)},o.prototype.hasEditVariable=function(t){return this._editMap.contains(t)},o.prototype.suggestValue=function(t,e){var r=this._editMap.find(t);if(void 0===r)throw new Error("unknown edit variable");var n=this._rowMap,i=r.second,a=e-i.constant;i.constant=e;var o=i.tag.marker,u=n.find(o);if(void 0!==u)return u.second.add(-a)<0&&this._infeasibleRows.push(o),void this._dualOptimize();var s=i.tag.other,u=n.find(s);if(void 0!==u)return u.second.add(a)<0&&this._infeasibleRows.push(s),void this._dualOptimize();for(var c=0,l=n.size();l>c;++c){var u=n.itemAt(c),f=u.second,p=f.coefficientFor(o);0!==p&&f.add(a*p)<0&&1!==u.first.type()&&this._infeasibleRows.push(u.first)}this._dualOptimize()},o.prototype.updateVariables=function(){for(var t=this._varMap,e=this._rowMap,r=0,n=t.size();n>r;++r){var i=t.itemAt(r),a=e.find(i.second);void 0!==a?i.first.setValue(a.second.constant()):i.first.setValue(0)}},o.prototype._getVarSymbol=function(t){var e=this,r=function(){return e._makeSymbol(1)};return this._varMap.setDefault(t,r).second},o.prototype._createRow=function(r){for(var n=r.expression(),i=new l(n.constant()),a=n.terms(),o=0,u=a.size();u>o;++o){var s=a.itemAt(o);if(!e(s.second)){var f=this._getVarSymbol(s.first),p=this._rowMap.find(f);void 0!==p?i.insertRow(p.second,s.second):i.insertSymbol(f,s.second)}}var h=this._objective,d=r.strength(),v={marker:c,other:c};switch(r.op()){case 0:case 1:var y=0===r.op()?1:-1,_=this._makeSymbol(2);if(v.marker=_,i.insertSymbol(_,y),d<t.Strength.required){var g=this._makeSymbol(3);v.other=g,i.insertSymbol(g,-y),h.insertSymbol(g,d)}break;case 2:if(d<t.Strength.required){var b=this._makeSymbol(3),w=this._makeSymbol(3);v.marker=b,v.other=w,i.insertSymbol(b,-1),i.insertSymbol(w,1),h.insertSymbol(b,d),h.insertSymbol(w,d)}else{var m=this._makeSymbol(4);v.marker=m,i.insertSymbol(m)}}return i.constant()<0&&i.reverseSign(),{row:i,tag:v}},o.prototype._chooseSubject=function(t,e){for(var r=t.cells(),n=0,i=r.size();i>n;++n){var a=r.itemAt(n);if(1===a.first.type())return a.first}var o=e.marker.type();return(2===o||3===o)&&t.coefficientFor(e.marker)<0?e.marker:(o=e.other.type(),(2===o||3===o)&&t.coefficientFor(e.other)<0?e.other:c)},o.prototype._addWithArtificialVariable=function(t){var r=this._makeSymbol(2);this._rowMap.insert(r,t.copy()),this._artificial=t.copy(),this._optimize(this._artificial);var n=e(this._artificial.constant());this._artificial=null;var i=this._rowMap.erase(r);if(void 0!==i){var a=i.second;if(a.isConstant())return n;var o=this._anyPivotableSymbol(a);if(0===o.type())return!1;a.solveForEx(r,o),this._substitute(o,a),this._rowMap.insert(o,a)}for(var u=this._rowMap,s=0,c=u.size();c>s;++s)u.itemAt(s).second.removeSymbol(r);return this._objective.removeSymbol(r),n},o.prototype._substitute=function(t,e){for(var r=this._rowMap,n=0,i=r.size();i>n;++n){var a=r.itemAt(n);a.second.substitute(t,e),a.second.constant()<0&&1!==a.first.type()&&this._infeasibleRows.push(a.first)}this._objective.substitute(t,e),this._artificial&&this._artificial.substitute(t,e)},o.prototype._optimize=function(t){for(;;){var e=this._getEnteringSymbol(t);if(0===e.type())return;var r=this._getLeavingSymbol(e);if(0===r.type())throw new Error("the objective is unbounded");var n=this._rowMap.erase(r).second;n.solveForEx(r,e),this._substitute(e,n),this._rowMap.insert(e,n)}},o.prototype._dualOptimize=function(){for(var t=this._rowMap,e=this._infeasibleRows;0!==e.length;){var r=e.pop(),n=t.find(r);if(void 0!==n&&n.second.constant()<0){var i=this._getDualEnteringSymbol(n.second);if(0===i.type())throw new Error("dual optimize failed");var a=n.second;t.erase(r),a.solveForEx(r,i),this._substitute(i,a),t.insert(i,a)}}},o.prototype._getEnteringSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();n>r;++r){var i=e.itemAt(r),a=i.first;if(i.second<0&&4!==a.type())return a}return c},o.prototype._getDualEnteringSymbol=function(t){for(var e=Number.MAX_VALUE,r=c,n=t.cells(),i=0,a=n.size();a>i;++i){var o=n.itemAt(i),u=o.first,s=o.second;if(s>0&&4!==u.type()){var l=this._objective.coefficientFor(u),f=l/s;e>f&&(e=f,r=u)}}return r},o.prototype._getLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=c,n=this._rowMap,i=0,a=n.size();a>i;++i){var o=n.itemAt(i),u=o.first;if(1!==u.type()){var s=o.second,l=s.coefficientFor(t);if(0>l){var f=-s.constant()/l;e>f&&(e=f,r=u)}}}return r},o.prototype._getMarkerLeavingSymbol=function(t){for(var e=Number.MAX_VALUE,r=e,n=e,i=c,a=i,o=i,u=i,s=this._rowMap,l=0,f=s.size();f>l;++l){var p=s.itemAt(l),h=p.second,d=h.coefficientFor(t);if(0!==d){var v=p.first;if(1===v.type())u=v;else if(0>d){var y=-h.constant()/d;r>y&&(r=y,a=v)}else{var y=h.constant()/d;n>y&&(n=y,o=v)}}}return a!==i?a:o!==i?o:u},o.prototype._removeConstraintEffects=function(t,e){3===e.marker.type()&&this._removeMarkerEffects(e.marker,t.strength()),3===e.other.type()&&this._removeMarkerEffects(e.other,t.strength())},o.prototype._removeMarkerEffects=function(t,e){var r=this._rowMap.find(t);void 0!==r?this._objective.insertRow(r.second,-e):this._objective.insertSymbol(t,-e)},o.prototype._anyPivotableSymbol=function(t){for(var e=t.cells(),r=0,n=e.size();n>r;++r){var i=e.itemAt(r),a=i.first.type();if(2===a||3===a)return i.first}return c},o.prototype._makeSymbol=function(t){return new s(t,this._idTick++)},o}();t.Solver=o;var u;!function(t){t[t.Invalid=0]="Invalid",t[t.External=1]="External",t[t.Slack=2]="Slack",t[t.Error=3]="Error",t[t.Dummy=4]="Dummy"}(u||(u={}));var s=function(){function t(t,e){this._id=e,this._type=t}return t.Compare=function(t,e){return t.id()-e.id()},t.prototype.id=function(){return this._id},t.prototype.type=function(){return this._type},t}(),c=new s(0,-1),l=function(){function r(e){void 0===e&&(e=0),this._cellMap=t.createMap(s.Compare),this._constant=e}return r.prototype.cells=function(){return this._cellMap},r.prototype.constant=function(){return this._constant},r.prototype.isConstant=function(){return this._cellMap.empty()},r.prototype.allDummies=function(){for(var t=this._cellMap,e=0,r=t.size();r>e;++e){var n=t.itemAt(e);if(4!==n.first.type())return!1}return!0},r.prototype.copy=function(){var t=new r(this._constant);return t._cellMap=this._cellMap.copy(),t},r.prototype.add=function(t){return this._constant+=t},r.prototype.insertSymbol=function(t,r){void 0===r&&(r=1);var n=this._cellMap.setDefault(t,function(){return 0});e(n.second+=r)&&this._cellMap.erase(t)},r.prototype.insertRow=function(t,e){void 0===e&&(e=1),this._constant+=t._constant*e;for(var r=t._cellMap,n=0,i=r.size();i>n;++n){var a=r.itemAt(n);this.insertSymbol(a.first,a.second*e)}},r.prototype.removeSymbol=function(t){this._cellMap.erase(t)},r.prototype.reverseSign=function(){this._constant=-this._constant;for(var t=this._cellMap,e=0,r=t.size();r>e;++e){var n=t.itemAt(e);n.second=-n.second}},r.prototype.solveFor=function(t){var e=this._cellMap,r=e.erase(t),n=-1/r.second;this._constant*=n;for(var i=0,a=e.size();a>i;++i)e.itemAt(i).second*=n},r.prototype.solveForEx=function(t,e){this.insertSymbol(t,-1),this.solveFor(e)},r.prototype.coefficientFor=function(t){var e=this._cellMap.find(t);return void 0!==e?e.second:0},r.prototype.substitute=function(t,e){var r=this._cellMap.erase(t);void 0!==r&&this.insertRow(e,r.second)},r}()}(r||(r={})),r})},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),o=r(15),u=n(o),s=r(1),c=n(s),l=function(){function t(e){i(this,t),this._name=e.name,this._type=e.type,this._solver=e.solver,this._attr={},e.name||(this._attr[c["default"].LEFT]=new u["default"].Variable,this._solver.addConstraint(new u["default"].Constraint(this._attr[c["default"].LEFT],u["default"].Operator.Eq,0)),this._attr[c["default"].TOP]=new u["default"].Variable,this._solver.addConstraint(new u["default"].Constraint(this._attr[c["default"].TOP],u["default"].Operator.Eq,0)),this._attr[c["default"].ZINDEX]=new u["default"].Variable,this._solver.addConstraint(new u["default"].Constraint(this._attr[c["default"].ZINDEX],u["default"].Operator.Eq,0)))}return a(t,[{key:"toJSON",value:function(){return{name:this.name,left:this.left,top:this.top,width:this.width,height:this.height}}},{key:"toString",value:function(){JSON.stringify(this.toJSON(),void 0,2)}},{key:"getValue",value:function(t){return this._attr[t]?this._attr[t].value():void 0}},{key:"_getAttr",value:function(t){if(this._attr[t])return this._attr[t];switch(this._attr[t]=new u["default"].Variable,t){case c["default"].RIGHT:this._getAttr(c["default"].LEFT),this._getAttr(c["default"].WIDTH),this._solver.addConstraint(new u["default"].Constraint(this._attr[t],u["default"].Operator.Eq,this._attr[c["default"].LEFT].plus(this._attr[c["default"].WIDTH])));break;case c["default"].BOTTOM:this._getAttr(c["default"].TOP),this._getAttr(c["default"].HEIGHT),this._solver.addConstraint(new u["default"].Constraint(this._attr[t],u["default"].Operator.Eq,this._attr[c["default"].TOP].plus(this._attr[c["default"].HEIGHT])));break;case c["default"].CENTERX:this._getAttr(c["default"].LEFT),this._getAttr(c["default"].WIDTH),this._solver.addConstraint(new u["default"].Constraint(this._attr[t],u["default"].Operator.Eq,this._attr[c["default"].LEFT].plus(this._attr[c["default"].WIDTH].divide(2))));break;case c["default"].CENTERY:this._getAttr(c["default"].TOP),this._getAttr(c["default"].HEIGHT),this._solver.addConstraint(new u["default"].Constraint(this._attr[t],u["default"].Operator.Eq,this._attr[c["default"].TOP].plus(this._attr[c["default"].HEIGHT].divide(2))))}return this._solver.updateVariables(),this._attr[t]}},{key:"_getAttrValue",value:function(t){return this._getAttr(t).value()}},{key:"name",get:function(){return this._name}},{key:"left",get:function(){return this._getAttrValue(c["default"].LEFT)}},{key:"right",get:function(){return this._getAttrValue(c["default"].RIGHT)}},{key:"width",get:function(){return this._getAttrValue(c["default"].WIDTH)}},{key:"height",get:function(){return this._getAttrValue(c["default"].HEIGHT)}},{key:"intrinsicWidth",get:function(){return this._intrinsicWidth},set:function(t){if(void 0!==t&&t!==this._intrinsicWidth){var e=this._getAttr(c["default"].WIDTH);void 0===this._intrinsicWidth&&this._solver.addEditVariable(e,u["default"].Strength.create(this._name?998:999,1e3,1e3)),this._intrinsicWidth=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}},{key:"intrinsicHeight",get:function(){return this._intrinsicHeight},set:function(t){if(void 0!==t&&t!==this._intrinsicHeight){var e=this._getAttr(c["default"].HEIGHT);void 0===this._intrinsicHeight&&this._solver.addEditVariable(e,u["default"].Strength.create(this._name?998:999,1e3,1e3)),this._intrinsicHeight=t,this._solver.suggestValue(e,t),this._solver.updateVariables()}}},{key:"top",get:function(){return this._getAttrValue(c["default"].TOP)}},{key:"bottom",get:function(){return this._getAttrValue(c["default"].BOTTOM)}},{key:"centerX",get:function(){return this._getAttrValue(c["default"].CENTERX)}},{key:"centerY",get:function(){return this._getAttrValue(c["default"].CENTERY)}},{key:"zIndex",get:function(){return this._getAttrValue(c["default"].ZINDEX)}},{key:"type",get:function(){return this._type}}]),t}();e["default"]=l}])});
//# sourceMappingURL=autolayout.kiwi.min.js.map